<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mysql | Xstudy</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/xstudy/img/logo1.ico">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?b17d02e4e0a8eeddf8b55aa8c0f1e764";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
  </script>
    <script language="javascript" type="text/javascript" src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="/xstudy/js/MouseClickEffect.js"></script>
    <script language="javascript" type="text/javascript" src="/xstudy/js/enhanceAPP.js"></script>
    <meta name="description" content="my study record">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="baidu-site-verification" content="code-bGotmcnXsO">
    
    <link rel="preload" href="/xstudy/assets/css/0.styles.d9f88a7e.css" as="style"><link rel="preload" href="/xstudy/assets/js/app.3d6c3b03.js" as="script"><link rel="preload" href="/xstudy/assets/js/19.64802264.js" as="script"><link rel="preload" href="/xstudy/assets/js/1.09d9e8ff.js" as="script"><link rel="preload" href="/xstudy/assets/js/160.dce4d5d9.js" as="script"><link rel="prefetch" href="/xstudy/assets/js/10.9e505c78.js"><link rel="prefetch" href="/xstudy/assets/js/100.065dabe9.js"><link rel="prefetch" href="/xstudy/assets/js/101.57752f52.js"><link rel="prefetch" href="/xstudy/assets/js/102.3ec8fed4.js"><link rel="prefetch" href="/xstudy/assets/js/103.7f060987.js"><link rel="prefetch" href="/xstudy/assets/js/104.9dd47d3f.js"><link rel="prefetch" href="/xstudy/assets/js/105.4714601f.js"><link rel="prefetch" href="/xstudy/assets/js/106.33219791.js"><link rel="prefetch" href="/xstudy/assets/js/107.b091b3b9.js"><link rel="prefetch" href="/xstudy/assets/js/108.b8d5655f.js"><link rel="prefetch" href="/xstudy/assets/js/109.8c440b71.js"><link rel="prefetch" href="/xstudy/assets/js/11.7aaf4552.js"><link rel="prefetch" href="/xstudy/assets/js/110.6a81c441.js"><link rel="prefetch" href="/xstudy/assets/js/111.3326509f.js"><link rel="prefetch" href="/xstudy/assets/js/112.0d27a1a2.js"><link rel="prefetch" href="/xstudy/assets/js/113.38774043.js"><link rel="prefetch" href="/xstudy/assets/js/114.b733495d.js"><link rel="prefetch" href="/xstudy/assets/js/115.1aa4eb46.js"><link rel="prefetch" href="/xstudy/assets/js/116.9eb44980.js"><link rel="prefetch" href="/xstudy/assets/js/117.62f8b73e.js"><link rel="prefetch" href="/xstudy/assets/js/118.0c8efeba.js"><link rel="prefetch" href="/xstudy/assets/js/119.50712dbe.js"><link rel="prefetch" href="/xstudy/assets/js/12.4dfbae75.js"><link rel="prefetch" href="/xstudy/assets/js/120.a89dc5ab.js"><link rel="prefetch" href="/xstudy/assets/js/121.a1bf37f0.js"><link rel="prefetch" href="/xstudy/assets/js/122.eb894b94.js"><link rel="prefetch" href="/xstudy/assets/js/123.c7c6732d.js"><link rel="prefetch" href="/xstudy/assets/js/124.e7b8c439.js"><link rel="prefetch" href="/xstudy/assets/js/125.6635c3ed.js"><link rel="prefetch" href="/xstudy/assets/js/126.d9699570.js"><link rel="prefetch" href="/xstudy/assets/js/127.88e2af70.js"><link rel="prefetch" href="/xstudy/assets/js/128.f201ee6a.js"><link rel="prefetch" href="/xstudy/assets/js/129.5694996d.js"><link rel="prefetch" href="/xstudy/assets/js/13.73d71fdc.js"><link rel="prefetch" href="/xstudy/assets/js/130.f3b34ef8.js"><link rel="prefetch" href="/xstudy/assets/js/131.86f3482e.js"><link rel="prefetch" href="/xstudy/assets/js/132.0f2538d4.js"><link rel="prefetch" href="/xstudy/assets/js/133.af44239a.js"><link rel="prefetch" href="/xstudy/assets/js/134.8e313b62.js"><link rel="prefetch" href="/xstudy/assets/js/135.c9b3e3a8.js"><link rel="prefetch" href="/xstudy/assets/js/136.1101692e.js"><link rel="prefetch" href="/xstudy/assets/js/137.ca5e68ba.js"><link rel="prefetch" href="/xstudy/assets/js/138.4d17bbd8.js"><link rel="prefetch" href="/xstudy/assets/js/139.5605035c.js"><link rel="prefetch" href="/xstudy/assets/js/14.e8a123ad.js"><link rel="prefetch" href="/xstudy/assets/js/140.6ead4839.js"><link rel="prefetch" href="/xstudy/assets/js/141.a0ad2973.js"><link rel="prefetch" href="/xstudy/assets/js/142.e45d497c.js"><link rel="prefetch" href="/xstudy/assets/js/143.e03322af.js"><link rel="prefetch" href="/xstudy/assets/js/144.7ce4488b.js"><link rel="prefetch" href="/xstudy/assets/js/145.597ccc38.js"><link rel="prefetch" href="/xstudy/assets/js/146.25b7c7aa.js"><link rel="prefetch" href="/xstudy/assets/js/147.19f2ea49.js"><link rel="prefetch" href="/xstudy/assets/js/148.aa2a8314.js"><link rel="prefetch" href="/xstudy/assets/js/149.8ba299bb.js"><link rel="prefetch" href="/xstudy/assets/js/15.c41aa653.js"><link rel="prefetch" href="/xstudy/assets/js/150.06d588a8.js"><link rel="prefetch" href="/xstudy/assets/js/151.409eaf70.js"><link rel="prefetch" href="/xstudy/assets/js/152.907b336d.js"><link rel="prefetch" href="/xstudy/assets/js/153.4a0d59ae.js"><link rel="prefetch" href="/xstudy/assets/js/154.81dffa5e.js"><link rel="prefetch" href="/xstudy/assets/js/155.f466274f.js"><link rel="prefetch" href="/xstudy/assets/js/156.3e337c60.js"><link rel="prefetch" href="/xstudy/assets/js/157.52d5423e.js"><link rel="prefetch" href="/xstudy/assets/js/158.0bf9a908.js"><link rel="prefetch" href="/xstudy/assets/js/159.138024e6.js"><link rel="prefetch" href="/xstudy/assets/js/16.dc1514b4.js"><link rel="prefetch" href="/xstudy/assets/js/161.4d73e91a.js"><link rel="prefetch" href="/xstudy/assets/js/162.2c0abd94.js"><link rel="prefetch" href="/xstudy/assets/js/163.15fff109.js"><link rel="prefetch" href="/xstudy/assets/js/164.017d4274.js"><link rel="prefetch" href="/xstudy/assets/js/165.b3069502.js"><link rel="prefetch" href="/xstudy/assets/js/166.eae77c2f.js"><link rel="prefetch" href="/xstudy/assets/js/167.fbb610cc.js"><link rel="prefetch" href="/xstudy/assets/js/168.e08e8d04.js"><link rel="prefetch" href="/xstudy/assets/js/169.300d5878.js"><link rel="prefetch" href="/xstudy/assets/js/17.6d036c62.js"><link rel="prefetch" href="/xstudy/assets/js/170.bd3f045b.js"><link rel="prefetch" href="/xstudy/assets/js/171.fd8361eb.js"><link rel="prefetch" href="/xstudy/assets/js/172.2544084e.js"><link rel="prefetch" href="/xstudy/assets/js/173.1a4e39ce.js"><link rel="prefetch" href="/xstudy/assets/js/174.a0f0cf50.js"><link rel="prefetch" href="/xstudy/assets/js/175.17468be0.js"><link rel="prefetch" href="/xstudy/assets/js/18.2642cef9.js"><link rel="prefetch" href="/xstudy/assets/js/20.b7ed91a2.js"><link rel="prefetch" href="/xstudy/assets/js/21.389d7d4e.js"><link rel="prefetch" href="/xstudy/assets/js/22.926d3140.js"><link rel="prefetch" href="/xstudy/assets/js/23.2d8a8692.js"><link rel="prefetch" href="/xstudy/assets/js/24.8e4d89b3.js"><link rel="prefetch" href="/xstudy/assets/js/25.99f3a3d1.js"><link rel="prefetch" href="/xstudy/assets/js/26.18e9c4b2.js"><link rel="prefetch" href="/xstudy/assets/js/27.6526c1ed.js"><link rel="prefetch" href="/xstudy/assets/js/28.4322ec4a.js"><link rel="prefetch" href="/xstudy/assets/js/29.60f029d5.js"><link rel="prefetch" href="/xstudy/assets/js/3.4370b068.js"><link rel="prefetch" href="/xstudy/assets/js/30.3e1bc698.js"><link rel="prefetch" href="/xstudy/assets/js/31.b44cf23d.js"><link rel="prefetch" href="/xstudy/assets/js/32.16f7d057.js"><link rel="prefetch" href="/xstudy/assets/js/33.868fc9fc.js"><link rel="prefetch" href="/xstudy/assets/js/34.90a94613.js"><link rel="prefetch" href="/xstudy/assets/js/35.9f008119.js"><link rel="prefetch" href="/xstudy/assets/js/36.19a72ee9.js"><link rel="prefetch" href="/xstudy/assets/js/37.a29485d4.js"><link rel="prefetch" href="/xstudy/assets/js/38.9e503ccf.js"><link rel="prefetch" href="/xstudy/assets/js/39.f882199a.js"><link rel="prefetch" href="/xstudy/assets/js/4.df1fb657.js"><link rel="prefetch" href="/xstudy/assets/js/40.bb38eb7e.js"><link rel="prefetch" href="/xstudy/assets/js/41.0a0e8892.js"><link rel="prefetch" href="/xstudy/assets/js/42.ee7c55d5.js"><link rel="prefetch" href="/xstudy/assets/js/43.ec85f03b.js"><link rel="prefetch" href="/xstudy/assets/js/44.cf439fbd.js"><link rel="prefetch" href="/xstudy/assets/js/45.bbdfa21c.js"><link rel="prefetch" href="/xstudy/assets/js/46.5b3a05f8.js"><link rel="prefetch" href="/xstudy/assets/js/47.2c6b5b7a.js"><link rel="prefetch" href="/xstudy/assets/js/48.e2d99bca.js"><link rel="prefetch" href="/xstudy/assets/js/49.da575daa.js"><link rel="prefetch" href="/xstudy/assets/js/5.f5f9fcd7.js"><link rel="prefetch" href="/xstudy/assets/js/50.5dc0b092.js"><link rel="prefetch" href="/xstudy/assets/js/51.5090323d.js"><link rel="prefetch" href="/xstudy/assets/js/52.f17a6c74.js"><link rel="prefetch" href="/xstudy/assets/js/53.7e407da9.js"><link rel="prefetch" href="/xstudy/assets/js/54.eeba64ae.js"><link rel="prefetch" href="/xstudy/assets/js/55.bf276748.js"><link rel="prefetch" href="/xstudy/assets/js/56.2f503b71.js"><link rel="prefetch" href="/xstudy/assets/js/57.2eb18d4a.js"><link rel="prefetch" href="/xstudy/assets/js/58.8fc4a91e.js"><link rel="prefetch" href="/xstudy/assets/js/59.43013c02.js"><link rel="prefetch" href="/xstudy/assets/js/6.acca9de8.js"><link rel="prefetch" href="/xstudy/assets/js/60.c281bd3b.js"><link rel="prefetch" href="/xstudy/assets/js/61.09ca19a1.js"><link rel="prefetch" href="/xstudy/assets/js/62.2d3dcbcd.js"><link rel="prefetch" href="/xstudy/assets/js/63.8c6a84a8.js"><link rel="prefetch" href="/xstudy/assets/js/64.a6b74307.js"><link rel="prefetch" href="/xstudy/assets/js/65.e984f895.js"><link rel="prefetch" href="/xstudy/assets/js/66.70b3dace.js"><link rel="prefetch" href="/xstudy/assets/js/67.4f317baf.js"><link rel="prefetch" href="/xstudy/assets/js/68.82b63769.js"><link rel="prefetch" href="/xstudy/assets/js/69.7a5a14ed.js"><link rel="prefetch" href="/xstudy/assets/js/7.5fe409d5.js"><link rel="prefetch" href="/xstudy/assets/js/70.2b4322f2.js"><link rel="prefetch" href="/xstudy/assets/js/71.3b479114.js"><link rel="prefetch" href="/xstudy/assets/js/72.60df85f8.js"><link rel="prefetch" href="/xstudy/assets/js/73.ccc8041f.js"><link rel="prefetch" href="/xstudy/assets/js/74.bd916aee.js"><link rel="prefetch" href="/xstudy/assets/js/75.02a42354.js"><link rel="prefetch" href="/xstudy/assets/js/76.afa4a7d0.js"><link rel="prefetch" href="/xstudy/assets/js/77.4dcb8d58.js"><link rel="prefetch" href="/xstudy/assets/js/78.f14c7eaf.js"><link rel="prefetch" href="/xstudy/assets/js/79.941a2930.js"><link rel="prefetch" href="/xstudy/assets/js/8.ce9a12cc.js"><link rel="prefetch" href="/xstudy/assets/js/80.11affd3b.js"><link rel="prefetch" href="/xstudy/assets/js/81.6b276616.js"><link rel="prefetch" href="/xstudy/assets/js/82.9a2c356d.js"><link rel="prefetch" href="/xstudy/assets/js/83.fb20d08e.js"><link rel="prefetch" href="/xstudy/assets/js/84.00568eed.js"><link rel="prefetch" href="/xstudy/assets/js/85.9043e674.js"><link rel="prefetch" href="/xstudy/assets/js/86.7f2eeacd.js"><link rel="prefetch" href="/xstudy/assets/js/87.565a3ce4.js"><link rel="prefetch" href="/xstudy/assets/js/88.b4e6e8db.js"><link rel="prefetch" href="/xstudy/assets/js/89.fa5ebb43.js"><link rel="prefetch" href="/xstudy/assets/js/9.89838fa8.js"><link rel="prefetch" href="/xstudy/assets/js/90.26b66eba.js"><link rel="prefetch" href="/xstudy/assets/js/91.bbf6ddb0.js"><link rel="prefetch" href="/xstudy/assets/js/92.ec8f6228.js"><link rel="prefetch" href="/xstudy/assets/js/93.605d953e.js"><link rel="prefetch" href="/xstudy/assets/js/94.9efdb0ae.js"><link rel="prefetch" href="/xstudy/assets/js/95.22fdddcb.js"><link rel="prefetch" href="/xstudy/assets/js/96.280d495a.js"><link rel="prefetch" href="/xstudy/assets/js/97.ed5489b5.js"><link rel="prefetch" href="/xstudy/assets/js/98.754d578b.js"><link rel="prefetch" href="/xstudy/assets/js/99.161fe63d.js">
    <link rel="stylesheet" href="/xstudy/assets/css/0.styles.d9f88a7e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Xstudy</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>my study record</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>默</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2023
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/xstudy/" class="home-link router-link-active"><img src="/xstudy/img/logo.jpg" alt="Xstudy" class="logo"> <span class="site-name">Xstudy</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/xstudy/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      摸鱼心得
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xstudy/categories/数据结构/" class="nav-link"><i class="undefined"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/xstudy/categories/框架/" class="nav-link"><i class="undefined"></i>
  框架
</a></li><li class="dropdown-item"><!----> <a href="/xstudy/categories/java/" class="nav-link"><i class="undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/xstudy/categories/中间件/" class="nav-link"><i class="undefined"></i>
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/xstudy/categories/算法/" class="nav-link"><i class="undefined"></i>
  算法
</a></li></ul></div></div><div class="nav-item"><a href="/xstudy/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/xstudy/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  日志
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      开源
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Palelie/xstudy" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/Palelies/xstudy" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/xstudy/img/logo.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    默
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>165</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>25</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/xstudy/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      摸鱼心得
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/xstudy/categories/数据结构/" class="nav-link"><i class="undefined"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/xstudy/categories/框架/" class="nav-link"><i class="undefined"></i>
  框架
</a></li><li class="dropdown-item"><!----> <a href="/xstudy/categories/java/" class="nav-link"><i class="undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/xstudy/categories/中间件/" class="nav-link"><i class="undefined"></i>
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/xstudy/categories/算法/" class="nav-link"><i class="undefined"></i>
  算法
</a></li></ul></div></div><div class="nav-item"><a href="/xstudy/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/xstudy/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  日志
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      开源
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Palelie/xstudy" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/Palelies/xstudy" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>中间件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xstudy/blogs/middleware/xuyan.html" class="sidebar-link">序言</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xstudy/blogs/middleware/mysql/MySQL.html" aria-current="page" class="active sidebar-link">Mysql</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Redis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xstudy/blogs/middleware/redis/quick_start.html" class="sidebar-link">Redis基础</a></li><li><a href="/xstudy/blogs/middleware/redis/redis_senior.html" class="sidebar-link">Redis高级</a></li><li><a href="/xstudy/blogs/middleware/redis/distributed_caching.html" class="sidebar-link">Redis分布式缓存</a></li><li><a href="/xstudy/blogs/middleware/redis/multi_cache.html" class="sidebar-link">多级缓存</a></li><li><a href="/xstudy/blogs/middleware/redis/principle.html" class="sidebar-link">Redis原理</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>消息队列</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xstudy/blogs/middleware/MQ/RabbitMQ.html" class="sidebar-link">RabbitMQ基础</a></li><li><a href="/xstudy/blogs/middleware/MQ/RabbitMQ_senior.html" class="sidebar-link">RabbitMQ高级</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>分布式搜索引擎</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xstudy/blogs/middleware/elasticsearch/elasticsearch01.html" class="sidebar-link">Elasticsearch01</a></li><li><a href="/xstudy/blogs/middleware/elasticsearch/elasticsearch02.html" class="sidebar-link">Elasticsearch02</a></li><li><a href="/xstudy/blogs/middleware/elasticsearch/elasticsearch03.html" class="sidebar-link">Elasticsearch03</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>容器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xstudy/blogs/middleware/docker/Docker.html" class="sidebar-link">Docker</a></li></ul></section></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Mysql</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>默</span>
            
          <span data-v-4e82dffc>2021 - </span>
          2023
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Mysql</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>默</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>8/5/2022</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>Mysql</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="mysql"><a href="#mysql" class="header-anchor">#</a> Mysql</h1> <h1 id="数据库"><a href="#数据库" class="header-anchor">#</a> 数据库</h1> <blockquote><p>什么是数据库？什么是数据库管理系统？什么是SQL？他们之间的关系是什么？</p></blockquote> <ul><li><p>数据库：</p> <p>英文单词DataBase，简称DB。按照一定格式存储数据的一些文件的组合。</p> <p>顾名思义：存储数据的仓库，实际上就是一堆文件。这些文件中存储了具有特定格式的数据。</p></li> <li><p>数据库管理系统：</p> <p>DataBaseManagement，简称DBMS。</p> <p>数据库管理系统是专门用来管理数据库中数据的，数据库管理系统可以对数据库当中的数据进行增删改查。</p></li> <li><p>常见的数据库管理系统：</p> <p>MySQL、Oracle、MS SqlServer、DB2、sybase等....</p></li></ul> <h1 id="sql-结构化查询语言"><a href="#sql-结构化查询语言" class="header-anchor">#</a> SQL：结构化查询语言</h1> <ul><li><p>程序员需要学习SQL语句，程序员通过编写SQL语句，然后DBMS负责执行SQL语句，最终来完成数据库中数据的增删改查操作。</p></li> <li><p>SQL是一套标准，程序员主要学习的就是SQL语句，这个SQL在mysql中可以使用，</p></li> <li><p>同时在Oracle中也可以使用，在DB2中也可以使用。</p> <p>​</p></li> <li><p>三者之间的关系？</p> <p>DBMS--执行--&gt; SQL --操作--&gt; DB</p> <p>​</p></li> <li><p>先安装数据库管理系统MySQL，然后学习SQL语句怎么写，编写SQL语句之后，DBMS对SQL语句进行执行，最终来完成数据库的数据管理。</p></li></ul> <h2 id="关于sql语句的分类"><a href="#关于sql语句的分类" class="header-anchor">#</a> 关于SQL语句的分类</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SQL</span>语句有很多，最好进行分门别类，这样更容易记忆。
	分为：
	DQL：
		数据查询语言（凡是带有<span class="token keyword">select</span>关键字的都是查询语句）
		<span class="token keyword">select</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

	DML：
		数据操作语言（凡是对表当中的数据进行增删改的都是DML）
		<span class="token keyword">insert</span> <span class="token keyword">delete</span> <span class="token keyword">update</span>
		<span class="token keyword">insert</span> 增
		<span class="token keyword">delete</span> 删
		<span class="token keyword">update</span> 改
		这个主要是操作表中的数据<span class="token keyword">data</span>。

	DDL：
		数据定义语言
		凡是带有<span class="token keyword">create</span>、<span class="token keyword">drop</span>、<span class="token keyword">alter</span>的都是DDL。
		DDL主要操作的是表的结构。不是表中的数据。
		<span class="token keyword">create</span>：新建，等同于增
		<span class="token keyword">drop</span>：删除
		<span class="token keyword">alter</span>：修改
		这个增删改和DML不同，这个主要是对表结构进行操作。

	TCL：
		是事务控制语言
		包括：
		事务提交：<span class="token keyword">commit</span><span class="token punctuation">;</span>
		事务回滚：<span class="token keyword">rollback</span><span class="token punctuation">;</span>

	DCL：
		是数据控制语言。
		例如：授权<span class="token keyword">grant</span>、撤销权限<span class="token keyword">revoke</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h1 id="mysql常用命令"><a href="#mysql常用命令" class="header-anchor">#</a> MySQL常用命令</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>登陆mysql: mysql <span class="token operator">-</span>u<span class="token punctuation">(</span>用户名<span class="token punctuation">)</span> <span class="token operator">-</span>p（密码）

退出mysql ：<span class="token keyword">exit</span><span class="token punctuation">;</span>

查看mysql中有哪些数据库 : <span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>  <span class="token comment">#注意：以分号结尾，分号是英文的分号。</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">--------------------+</span>
	<span class="token operator">|</span> <span class="token keyword">Database</span>           <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">--------------------+</span>
	<span class="token operator">|</span> information_schema <span class="token operator">|</span>
	<span class="token operator">|</span> mysql              <span class="token operator">|</span>
	<span class="token operator">|</span> performance_schema <span class="token operator">|</span>
	<span class="token operator">|</span> test               <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">--------------------+</span>
	mysql默认自带了<span class="token number">4</span>个数据库。
	
选择使用某个数据库:
mysql<span class="token operator">&gt;</span> <span class="token keyword">use</span> test<span class="token punctuation">;</span>
	<span class="token keyword">Database</span> changed
	表示正在使用一个名字叫做test的数据库。

创建数据库:
mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">database</span> bjpowernode<span class="token punctuation">;</span>
	Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
		<span class="token operator">+</span><span class="token comment">--------------------+</span>
		<span class="token operator">|</span> <span class="token keyword">Database</span>           <span class="token operator">|</span>
		<span class="token operator">+</span><span class="token comment">--------------------+</span>
		<span class="token operator">|</span> information_schema <span class="token operator">|</span>
		<span class="token operator">|</span> bjpowernode        <span class="token operator">|</span>
		<span class="token operator">|</span> mysql              <span class="token operator">|</span>
		<span class="token operator">|</span> performance_schema <span class="token operator">|</span>
		<span class="token operator">|</span> test               <span class="token operator">|</span>
		<span class="token operator">+</span><span class="token comment">--------------------+</span>
		
查看某个数据库下有哪些表:
mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>

查看mysql数据库的版本号：
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token operator">+</span><span class="token comment">-----------+</span>
		<span class="token operator">|</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|</span>
		<span class="token operator">+</span><span class="token comment">-----------+</span>
		<span class="token operator">|</span> <span class="token number">5.5</span><span class="token number">.36</span>    <span class="token operator">|</span>
		<span class="token operator">+</span><span class="token comment">-----------+</span>
		
查看当前使用的是哪个数据库:
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token operator">+</span><span class="token comment">-------------+</span>
	<span class="token operator">|</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">-------------+</span>
	<span class="token operator">|</span> bjpowernode <span class="token operator">|</span>
	<span class="token operator">+</span><span class="token comment">-------------+</span>

导入一下提前准备好的数据：bjpowernode<span class="token punctuation">.</span><span class="token keyword">sql</span> 这个文件中是练习准备的数据库表。
怎么将<span class="token keyword">sql</span>文件中的数据导入
mysql<span class="token operator">&gt;</span> source D:\course\<span class="token number">03</span><span class="token operator">-</span>MySQL\document\bjpowernode<span class="token punctuation">.</span><span class="token keyword">sql</span> <span class="token comment">#注意：路径中不要有中文！！！！</span>

查看表的结构：
mysql<span class="token operator">&gt;</span> <span class="token keyword">desc</span> dept<span class="token punctuation">;</span> <span class="token comment"># describe缩写为：desc</span>
<span class="token operator">+</span><span class="token comment">--------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> Field  <span class="token operator">|</span> <span class="token keyword">Type</span>        <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> DEPTNO <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>      <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>部门编号
<span class="token operator">|</span> DNAME  <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>部门名字
<span class="token operator">|</span> LOC    <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>地理位置S
<span class="token operator">+</span><span class="token comment">--------+-------------+------+-----+---------+-------+</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><h1 id="数据库表"><a href="#数据库表" class="header-anchor">#</a> 数据库表</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>数据库当中最基本的单元是表：<span class="token keyword">table</span>

	什么是表<span class="token keyword">table</span>？为什么用表来存储数据呢？

		姓名	性别	年龄<span class="token punctuation">(</span>列：字段<span class="token punctuation">)</span> 
		<span class="token comment">---------------------------</span>
		张三	男			<span class="token number">20</span>            <span class="token comment">-------&gt;行（记录）</span>
		李四	女			<span class="token number">21</span>            <span class="token comment">-------&gt;行（记录）</span>
		王五	男			<span class="token number">22</span>            <span class="token comment">-------&gt;行（记录）</span>
	
	数据库当中是以表格的形式表示数据的。因为表比较直观。

	任何一张表都有行和列：
		行（<span class="token keyword">row</span>）：被称为数据<span class="token operator">/</span>记录。
		列（<span class="token keyword">column</span>）：被称为字段。
        
	姓名字段、性别字段、年龄字段。

	了解一下：
		每一个字段都有：字段名、数据类型、约束等属性。字段名可以理解，是一个普通的名字，见名知意就行。
		数据类型：字符串，数字，日期等，后期讲。
		约束：约束也有很多，其中一个叫做唯一性约束，这种约束添加之后，该字段中的数据不能重复。		
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h1 id="查询-select"><a href="#查询-select" class="header-anchor">#</a> 查询：select</h1> <h2 id="简单查询"><a href="#简单查询" class="header-anchor">#</a> 简单查询</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>查询一个字段？
<span class="token keyword">select</span> 字段名 <span class="token keyword">from</span> 表名<span class="token punctuation">;</span> 
<span class="token comment"># 其中要注意：select和from都是关键字。</span>
<span class="token comment"># 字段名和表名都是标识符。</span>

强调：对于<span class="token keyword">SQL</span>语句来说，是通用的，所有的<span class="token keyword">SQL</span>语句以“<span class="token punctuation">;</span>”结尾。
	 另外<span class="token keyword">SQL</span>语句不区分大小写，都行。

查询两个字段，或者多个字段使用逗号隔开“<span class="token punctuation">,</span>”
查询部门编号和部门名
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span>dname <span class="token keyword">from</span> dept<span class="token punctuation">;</span>
    <span class="token operator">+</span><span class="token comment">--------+------------+</span>
    <span class="token operator">|</span> deptno <span class="token operator">|</span> dname      <span class="token operator">|</span>
    <span class="token operator">+</span><span class="token comment">--------+------------+</span>
    <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
    <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
    <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span>
    <span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span>
    <span class="token operator">+</span><span class="token comment">--------+------------+</span>
    
查询所有字段
第一种方式：可以把每个字段都写上
	<span class="token keyword">select</span> a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>e<span class="token punctuation">,</span>f<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> tablename<span class="token punctuation">;</span>

第二种方式：可以使用<span class="token operator">*</span>
	<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept<span class="token punctuation">;</span>
		<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
		<span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME      <span class="token operator">|</span> LOC      <span class="token operator">|</span>
		<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
        <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span> NEW YORK <span class="token operator">|</span>
        <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span> DALLAS   <span class="token operator">|</span>
        <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span> CHICAGO  <span class="token operator">|</span>
        <span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span> BOSTON   <span class="token operator">|</span>
        <span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>

    这种方式的缺点：
        <span class="token number">1</span>、效率低
        <span class="token number">2</span>、可读性差。
    在实际开发中不建议，可以自己玩没问题。
    你可以在DOS命令窗口中想快速的看一看全表数据可以采用这种方式。

给查询的列起别名：使用<span class="token keyword">as</span>关键字起别名。
  mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> deptno<span class="token punctuation">,</span>dname <span class="token keyword">as</span> deptname <span class="token keyword">from</span> dept<span class="token punctuation">;</span>
      <span class="token operator">+</span><span class="token comment">--------+------------+</span>
      <span class="token operator">|</span> deptno <span class="token operator">|</span> deptname   <span class="token operator">|</span>
      <span class="token operator">+</span><span class="token comment">--------+------------+</span>
      <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
      <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
      <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span>
      <span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span>
      <span class="token operator">+</span><span class="token comment">--------+------------+</span>
  注意：只是将显示的查询结果列名显示为deptname，原表列名还是叫：dname
  记住：<span class="token keyword">select</span>语句是永远都不会进行修改操作的。（因为只负责查询）

  <span class="token keyword">as</span>关键字可以省略吗？可以的
    mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> deptno<span class="token punctuation">,</span>dname deptname <span class="token keyword">from</span> dept<span class="token punctuation">;</span>
    
假设起别名的时候，别名里面有空格，怎么办？   
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span>dname <span class="token string">'dept name'</span> <span class="token keyword">from</span> dept<span class="token punctuation">;</span> <span class="token comment">//加单引号</span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span>dname <span class="token string">&quot;dept name&quot;</span> <span class="token keyword">from</span> dept<span class="token punctuation">;</span> <span class="token comment">//加双引号</span>
      <span class="token operator">+</span><span class="token comment">--------+------------+</span>
      <span class="token operator">|</span> deptno <span class="token operator">|</span> dept name  <span class="token operator">|</span>
      <span class="token operator">+</span><span class="token comment">--------+------------+</span>
      <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
      <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
      <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span>
      <span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span>
      <span class="token operator">+</span><span class="token comment">--------+------------+</span>
注意：在所有的数据库当中，字符串统一使用单引号括起来，单引号是标准，双引号在oracle数据库中用不了。但是在mysql中可以使用。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><h2 id="条件查询"><a href="#条件查询" class="header-anchor">#</a> 条件查询</h2> <p>条件查询：不是将表中所有数据都查出来。是查询出来符合条件的。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>查询语法格式：
    <span class="token keyword">select</span>
      字段<span class="token number">1</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token punctuation">,</span>字段<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">from</span> 
      表名
    <span class="token keyword">where</span>
      条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>都有哪些条件？
<span class="token operator">=</span> 等于
查询薪资等于<span class="token number">800</span>的员工姓名和编号？
  <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span>
查询SMITH的编号和薪资？
  <span class="token keyword">select</span> empno<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'SMITH'</span><span class="token punctuation">;</span> <span class="token comment">//字符串使用单引号</span>

<span class="token operator">&lt;&gt;</span> 或<span class="token operator">!=</span> 不等于
查询薪资不等于<span class="token number">800</span>的员工姓名和编号？
  <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">!=</span> <span class="token number">800</span><span class="token punctuation">;</span>
  <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&lt;&gt;</span> <span class="token number">800</span><span class="token punctuation">;</span> <span class="token comment">// 小于号和大于号组成的不等号</span>
  
<span class="token operator">&lt;</span> 小于
查询薪资小于<span class="token number">2000</span>的员工姓名和编号？
  mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&lt;</span> <span class="token number">2000</span><span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">-------+--------+---------+</span>
  <span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> sal     <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">-------+--------+---------+</span>
  <span class="token operator">|</span>  <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>
  <span class="token operator">|</span>  <span class="token number">7499</span> <span class="token operator">|</span> ALLEN  <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>
  <span class="token operator">|</span>  <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">-------+--------+---------+</span>

<span class="token operator">&lt;=</span> 小于等于
查询薪资小于等于<span class="token number">3000</span>的员工姓名和编号？
  <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&lt;=</span> <span class="token number">3000</span><span class="token punctuation">;</span>

<span class="token operator">&gt;</span> 大于
查询薪资大于<span class="token number">3000</span>的员工姓名和编号？
  <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">3000</span><span class="token punctuation">;</span>

<span class="token operator">&gt;=</span> 大于等于
查询薪资大于等于<span class="token number">3000</span>的员工姓名和编号？
  <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;=</span> <span class="token number">3000</span><span class="token punctuation">;</span>

<span class="token operator">between</span> … <span class="token operator">and</span> …<span class="token punctuation">.</span> 两个值之间<span class="token punctuation">,</span> 等同于 <span class="token operator">&gt;=</span> <span class="token operator">and</span> <span class="token operator">&lt;=</span>
查询薪资在<span class="token number">2450</span>和<span class="token number">3000</span>之间的员工信息？包括<span class="token number">2450</span>和<span class="token number">3000</span>
  第一种方式：<span class="token operator">&gt;=</span> <span class="token operator">and</span> <span class="token operator">&lt;=</span> （<span class="token operator">and</span>是并且的意思。）
    <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;=</span> <span class="token number">2450</span> <span class="token operator">and</span> sal <span class="token operator">&lt;=</span> <span class="token number">3000</span><span class="token punctuation">;</span>
    <span class="token operator">+</span><span class="token comment">-------+-------+---------+</span>
    <span class="token operator">|</span> empno <span class="token operator">|</span> ename <span class="token operator">|</span> sal     <span class="token operator">|</span>
    <span class="token operator">+</span><span class="token comment">-------+-------+---------+</span>
    <span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES <span class="token operator">|</span> <span class="token number">2975.00</span> <span class="token operator">|</span>
    <span class="token operator">|</span>  <span class="token number">7698</span> <span class="token operator">|</span> BLAKE <span class="token operator">|</span> <span class="token number">2850.00</span> <span class="token operator">|</span>
    <span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> CLARK <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>
    <span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> SCOTT <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>
    <span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> FORD  <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>
    <span class="token operator">+</span><span class="token comment">-------+-------+---------+</span>
  第二种方式：<span class="token operator">between</span> … <span class="token operator">and</span> …
    <span class="token keyword">select</span> 
      empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal 
    <span class="token keyword">from</span> 
      emp 
    <span class="token keyword">where</span> 
      sal <span class="token operator">between</span> <span class="token number">2450</span> <span class="token operator">and</span> <span class="token number">3000</span><span class="token punctuation">;</span>
    
    注意：
      使用<span class="token operator">between</span> <span class="token operator">and</span>的时候，必须遵循左小右大。
      <span class="token operator">between</span> <span class="token operator">and</span>是闭区间，包括两端的值。

<span class="token operator">is</span> <span class="token boolean">null</span> 为 <span class="token boolean">null</span>（<span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span> 不为空）
注意：在数据库当中<span class="token boolean">null</span>不能使用等号进行衡量。需要使用<span class="token operator">is</span> <span class="token boolean">null</span>因为数据库中的<span class="token boolean">null</span>代表什么也没有，它不是一个值，所以不能使用等号衡量。

<span class="token operator">and</span> 并且 

<span class="token operator">or</span> 或者

<span class="token operator">and</span>和<span class="token operator">or</span>同时出现的话，有优先级问题吗？
<span class="token operator">and</span>和<span class="token operator">or</span>同时出现，<span class="token operator">and</span>优先级较高。如果想让<span class="token operator">or</span>先执行，需要加“小括号”<span class="token punctuation">.</span>以后在开发中，如果不确定优先级，就加小括号就行了。

<span class="token operator">in</span> 包含，相当于多个 <span class="token operator">or</span> （<span class="token operator">not</span> <span class="token operator">in</span> 不在这个范围中）

<span class="token operator">not</span> 可以取非，主要用在 <span class="token operator">is</span> 或 <span class="token operator">in</span> 中

<span class="token operator">like</span> 称为模糊查询，支持<span class="token operator">%</span>或下划线匹配
<span class="token comment"># %匹配任意多个字符</span>
<span class="token comment"># 下划线：任意一个字符。</span>
<span class="token comment">#（%是一个特殊的符号，_ 也是一个特殊符号）</span>

找出名字以T结尾的？
  <span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%T'</span><span class="token punctuation">;</span>
  
找出名字以K开始的？
  <span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'K%'</span><span class="token punctuation">;</span>

找出第二个字每是A的？
  <span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'_A%'</span><span class="token punctuation">;</span>

找出第三个字母是R的？
  <span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'__R%'</span><span class="token punctuation">;</span>



</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br></div></div><h2 id="分组查询"><a href="#分组查询" class="header-anchor">#</a> 分组查询</h2> <blockquote><p>什么是分组查询？</p></blockquote> <ul><li>在实际的应用中，可能有这样的需求，需要先进行分组，然后对每一组的数据进行操作，这个时候我们需要使用分组查询。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>语法格式：
	<span class="token keyword">select</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">from</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">group</span> <span class="token keyword">by</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

注意:
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> job<span class="token punctuation">;</span>
    <span class="token operator">+</span><span class="token comment">-------+-----------+----------+</span>
    <span class="token operator">|</span> ename <span class="token operator">|</span> job       <span class="token operator">|</span> <span class="token function">sum</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">|</span>
    <span class="token operator">+</span><span class="token comment">-------+-----------+----------+</span>
    <span class="token operator">|</span> SCOTT <span class="token operator">|</span> ANALYST   <span class="token operator">|</span>  <span class="token number">6000.00</span> <span class="token operator">|</span>
    <span class="token operator">|</span> SMITH <span class="token operator">|</span> CLERK     <span class="token operator">|</span>  <span class="token number">4150.00</span> <span class="token operator">|</span>
    <span class="token operator">|</span> JONES <span class="token operator">|</span> MANAGER   <span class="token operator">|</span>  <span class="token number">8275.00</span> <span class="token operator">|</span>
    <span class="token operator">|</span> KING  <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span>  <span class="token number">5000.00</span> <span class="token operator">|</span>
    <span class="token operator">|</span> ALLEN <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span>  <span class="token number">5600.00</span> <span class="token operator">|</span>
    <span class="token operator">+</span><span class="token comment">-------+-----------+----------+</span>
以上语句在mysql中可以执行，但<span class="token keyword">select</span>后面添加ename字段没有意义。
以上语句在oracle中执行报错。
oracle的语法比mysql的语法严格。（mysql的语法相对来说松散一些！）

重点结论：在一条<span class="token keyword">select</span>语句当中，如果有<span class="token keyword">group</span> <span class="token keyword">by</span>语句的话，<span class="token keyword">select</span>后面只能跟：参加分组的字段，以及分组函数。其它的一律不能跟。

找出“每个部门，不同工作岗位”的最高薪资？
<span class="token keyword">select</span> 
  deptno<span class="token punctuation">,</span> job<span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span>
<span class="token keyword">from</span>
  emp
<span class="token keyword">group</span> <span class="token keyword">by</span>
  deptno<span class="token punctuation">,</span> job<span class="token punctuation">;</span>
技巧：两个字段联合成<span class="token number">1</span>个字段看。（两个字段联合分组）

使用<span class="token keyword">having</span>可以对分完组之后的数据进一步过滤。
<span class="token keyword">having</span>不能单独使用，<span class="token keyword">having</span>不能代替<span class="token keyword">where</span>，<span class="token keyword">having</span>必须和<span class="token keyword">group</span> <span class="token keyword">by</span>联合使用。

<span class="token keyword">where</span>和<span class="token keyword">having</span>，优先选择<span class="token keyword">where</span>，<span class="token keyword">where</span>实在完成不了了，再选择<span class="token keyword">having</span>。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><blockquote><p>补充一点</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>将之前的关键字全部组合在一起，来看一下他们的执行顺序？
    <span class="token keyword">select</span>
      	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">from</span>
     	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">where</span>
    	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">group</span> <span class="token keyword">by</span>
     	 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">having</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">order</span> <span class="token keyword">by</span>
     	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
以上关键字的顺序不能颠倒，需要记忆。
执行顺序是什么？
  <span class="token number">1.</span> <span class="token keyword">from</span>
  <span class="token number">2.</span> <span class="token keyword">where</span>
  <span class="token number">3.</span> <span class="token keyword">group</span> <span class="token keyword">by</span>
  <span class="token number">4.</span> <span class="token keyword">having</span>
  <span class="token number">5.</span> <span class="token keyword">select</span>
  <span class="token number">6.</span> <span class="token keyword">order</span> <span class="token keyword">by</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h1 id="排序-order-by"><a href="#排序-order-by" class="header-anchor">#</a> 排序：order by</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>语法格式：
	<span class="token keyword">select</span> 
		ename<span class="token punctuation">,</span>sal
	<span class="token keyword">from</span>
		emp
	<span class="token keyword">order</span> <span class="token keyword">by</span>
		sal<span class="token punctuation">;</span> <span class="token comment">// 默认是升序！！</span>
指定降序： <span class="token keyword">desc</span>
指定升序： <span class="token keyword">asc</span>

以两个字段排序吗？或者说按照多个字段排序？
查询员工名字和薪资，要求按照薪资升序，如果薪资一样的话，再按照名字升序排列。
<span class="token keyword">select</span> 
	ename<span class="token punctuation">,</span>sal
<span class="token keyword">from</span>
	emp
<span class="token keyword">order</span> <span class="token keyword">by</span>
	sal <span class="token keyword">asc</span><span class="token punctuation">,</span> ename <span class="token keyword">asc</span><span class="token punctuation">;</span> <span class="token comment">// sal在前，起主导，只有sal相等的时候，才会考虑启用ename排序。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h1 id="数据处理函数"><a href="#数据处理函数" class="header-anchor">#</a> 数据处理函数</h1> <ul><li>数据处理函数又被称为单行处理函数</li></ul> <h3 id="单行处理函数"><a href="#单行处理函数" class="header-anchor">#</a> 单行处理函数</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>单行处理函数的特点：一个输入对应一个输出。
单行处理函数常见:
lower 转换小写
	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> lower<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">as</span> ename <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
	
upper 转换大写
	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> upper<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">as</span> name <span class="token keyword">from</span> t_student<span class="token punctuation">;</span>
	
substr 取子串（substr<span class="token punctuation">(</span>被截取的字符串<span class="token punctuation">,</span> 起始下标<span class="token punctuation">,</span>截取的长度<span class="token punctuation">)</span>）
	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> substr<span class="token punctuation">(</span>ename<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ename <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
	
concat函数进行字符串的拼接
	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> concat<span class="token punctuation">(</span>empno<span class="token punctuation">,</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
length 取长度
	mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> length<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> enamelength <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
	
trim 去空格
	mysql<span class="token operator">&gt;</span>	<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> trim<span class="token punctuation">(</span><span class="token string">'   KING'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
str_to_date 将字符串转换成日期

date_format 格式化日期
	
format 设置千分位
	
<span class="token keyword">case</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">when</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">then</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">when</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">then</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">else</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">end</span>
当员工的工作岗位是MANAGER的时候，工资上调<span class="token number">10</span><span class="token operator">%</span>，当工作岗位是SALESMAN的时候，工资上调<span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">,</span>其它正常。	（注意：不修改数据库，只是将查询结果显示为工资上调）
<span class="token keyword">select</span> 
  ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span> sal <span class="token keyword">as</span> oldsal<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token keyword">case</span> job <span class="token keyword">when</span> <span class="token string">'MANAGER'</span> <span class="token keyword">then</span> sal<span class="token operator">*</span><span class="token number">1.1</span> <span class="token keyword">when</span> <span class="token string">'SALESMAN'</span> <span class="token keyword">then</span> sal<span class="token operator">*</span><span class="token number">1.5</span> <span class="token keyword">else</span> sal <span class="token keyword">end</span><span class="token punctuation">)</span> <span class="token keyword">as</span> newsal 
<span class="token keyword">from</span> 
  emp<span class="token punctuation">;</span>

round 四舍五入
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">1236.567</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">as</span> result <span class="token keyword">from</span> emp<span class="token punctuation">;</span> <span class="token comment">//保留整数位。</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">1236.567</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> result <span class="token keyword">from</span> emp<span class="token punctuation">;</span> <span class="token comment">//保留1个小数</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">1236.567</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">as</span> result <span class="token keyword">from</span> emp<span class="token punctuation">;</span> <span class="token comment">//保留2个小数</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">1236.567</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> result <span class="token keyword">from</span> emp<span class="token punctuation">;</span> <span class="token comment">// 保留到十位。</span>

rand<span class="token punctuation">(</span><span class="token punctuation">)</span> 生成随机数
  mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span> <span class="token comment">// 100以内的随机数</span>

ifnull 可以将 <span class="token boolean">null</span> 转换成一个具体值
ifnull是空处理函数。专门处理空的。在所有数据库当中，只要有<span class="token boolean">NULL</span>参与的数学运算，最终结果就是<span class="token boolean">NULL</span>。
注意：<span class="token boolean">NULL</span>只要参与运算，最终结果一定是<span class="token boolean">NULL</span>。为了避免这个现象，需要使用ifnull函数。ifnull函数用法：ifnull<span class="token punctuation">(</span>数据<span class="token punctuation">,</span> 被当做哪个值<span class="token punctuation">)</span>。如果“数据”为<span class="token boolean">NULL</span>的时候，把这个数据结构当做哪个值。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h3 id="分组函数-多行处理函数"><a href="#分组函数-多行处理函数" class="header-anchor">#</a> 分组函数（多行处理函数）</h3> <p>多行处理函数特点：多个输入，对应1个输出。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>count	<span class="token comment"># 计数</span>
sum		<span class="token comment"># 求和</span>
avg		<span class="token comment"># 平均值</span>
max		<span class="token comment"># 最大值</span>
min		<span class="token comment"># 最小值</span>

注意：
	<span class="token number">1.</span> 分组函数在使用的时候必须先进行分组，然后才能用。如果你没有对数据进行分组，整张表默认为一组。
	<span class="token number">2.</span> 分组函数自动忽略<span class="token boolean">NULL</span>，你不需要提前对<span class="token boolean">NULL</span>进行处理。
	<span class="token number">3.</span> 分组函数中<span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>和<span class="token function">count</span><span class="token punctuation">(</span>具体字段<span class="token punctuation">)</span>有什么区别？
		<span class="token function">count</span><span class="token punctuation">(</span>具体字段<span class="token punctuation">)</span>：表示统计该字段下所有不为<span class="token boolean">NULL</span>的元素的总数。
		<span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>：统计表当中的总行数。（只要有一行数据count则<span class="token operator">+</span><span class="token operator">+</span>）
      	因为每一行记录不可能都为<span class="token boolean">NULL</span>，一行数据中有一列不为<span class="token boolean">NULL</span>，则这行数据就是有效的。
    <span class="token number">4.</span> 分组函数不能够直接使用在<span class="token keyword">where</span>子句中。
    <span class="token number">5.</span> 所有的分组函数可以组合起来一起用。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="distinct"><a href="#distinct" class="header-anchor">#</a> distinct</h3> <blockquote><p>把查询结果去除重复记录 <strong>distinct</strong></p></blockquote> <p>注意：原表数据不会被修改，只是查询结果去重。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">// distinct只能出现在所有字段的最前方。</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">distinct</span> job <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">// distinct出现在job,deptno两个字段之前，表示两个字段联合起来去重。</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">distinct</span> job<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h1 id="连接查询"><a href="#连接查询" class="header-anchor">#</a> 连接查询</h1> <blockquote><p>多张表联合起来查询数据，被称为连接查询。</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>根据表连接的方式分类：
内连接： 等值连接 非等值连接 自连接

外连接： 左外连接（左连接）	右外连接（右连接）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="内连接-等值连接"><a href="#内连接-等值连接" class="header-anchor">#</a> 内连接：等值连接</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>SQL99语法：
  <span class="token keyword">select</span> 
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">from</span>
    a
  <span class="token keyword">inner</span> <span class="token keyword">join</span>
    b
  <span class="token keyword">on</span>
    a和b的连接条件
  <span class="token keyword">where</span>
    筛选条件
<span class="token comment"># inner可以省略（带着inner可读性更好！！！一眼就能看出来是内连接）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="内连接-非等值连接"><a href="#内连接-非等值连接" class="header-anchor">#</a> 内连接：非等值连接</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 
	e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> e<span class="token punctuation">.</span>sal<span class="token punctuation">,</span> s<span class="token punctuation">.</span>grade
<span class="token keyword">from</span>
	emp e
<span class="token keyword">join</span>
	salgrade s
<span class="token keyword">on</span>
	e<span class="token punctuation">.</span>sal <span class="token operator">between</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal<span class="token punctuation">;</span> <span class="token comment">// 条件不是一个等量关系，称为非等值连接。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="内连接-自连接"><a href="#内连接-自连接" class="header-anchor">#</a> 内连接：自连接</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 
	a<span class="token punctuation">.</span>ename <span class="token keyword">as</span> <span class="token string">'员工名'</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>ename <span class="token keyword">as</span> <span class="token string">'领导名'</span>
<span class="token keyword">from</span>
	emp a
<span class="token keyword">join</span>
	emp b
<span class="token keyword">on</span>
	a<span class="token punctuation">.</span>mgr <span class="token operator">=</span> b<span class="token punctuation">.</span>empno<span class="token punctuation">;</span> <span class="token comment">//员工的领导编号 = 领导的员工编号</span>
以上就是内连接中的：自连接，技巧：一张表看做两张表
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="外连接"><a href="#外连接" class="header-anchor">#</a> 外连接</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">// outer是可以省略的，带着可读性强。</span>
<span class="token keyword">select</span> 
	e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span>
	emp e 
<span class="token keyword">right</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> 
	dept d
<span class="token keyword">on</span>
	e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
	
<span class="token keyword">right</span>代表什么：表示将<span class="token keyword">join</span>关键字右边的这张表看成主表，主要是为了将这张表的数据全部查询出来，捎带着关联查询左边的表。在外连接当中，两张表连接，产生了主次关系。

带有<span class="token keyword">right</span>的是右外连接，又叫做右连接。
带有<span class="token keyword">left</span>的是左外连接，又叫做左连接。
任何一个右连接都有左连接的写法。
任何一个左连接都有右连接的写法。

思考：外连接的查询结果条数一定是 <span class="token operator">&gt;=</span> 内连接的查询结果条数？
	正确。
	
	
三张表，四张表怎么连接？
语法：
  <span class="token keyword">select</span> 
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">from</span>
    a
  <span class="token keyword">join</span>
    b
  <span class="token keyword">on</span>
    a和b的连接条件
  <span class="token keyword">join</span>
    c
  <span class="token keyword">on</span>
    a和c的连接条件
  <span class="token keyword">right</span> <span class="token keyword">join</span>
    d
  <span class="token keyword">on</span>
    a和d的连接条件
  
  一条<span class="token keyword">SQL</span>中内连接和外连接可以混合。都可以出现！

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h1 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h1> <blockquote><p>select语句中嵌套select语句，被嵌套的select语句称为子查询。</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>子查询都可以出现在哪里呢？
<span class="token keyword">select</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">select</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token keyword">from</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">select</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token keyword">where</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">select</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
  
  
<span class="token keyword">where</span>子句中的子查询:

第一步：查询最低工资是多少
  <span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">----------+</span>
  <span class="token operator">|</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----------+</span>
  <span class="token operator">|</span>   <span class="token number">800.00</span> <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----------+</span>
第二步：找出<span class="token operator">&gt;</span><span class="token number">800</span>的
  <span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">800</span><span class="token punctuation">;</span>

第三步：合并
  <span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token keyword">from</span>子句中的子查询:
	注意：<span class="token keyword">from</span>后面的子查询，可以将子查询的查询结果当做一张临时表。


<span class="token keyword">select</span>后面出现的子查询（这个内容不需要掌握，了解即可！！！）
	注意：对于<span class="token keyword">select</span>后面的子查询来说，这个子查询只能一次返回<span class="token number">1</span>条结果
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h1 id="union合并"><a href="#union合并" class="header-anchor">#</a> union合并</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>案例：查询工作岗位是MANAGER和SALESMAN的员工？
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span> <span class="token operator">or</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">'MANAGER'</span><span class="token punctuation">,</span><span class="token string">'SALESMAN'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>

<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span>
<span class="token keyword">union</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">--------+----------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> BLAKE  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> CLARK  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span>
<span class="token operator">|</span> ALLEN  <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>
<span class="token keyword">union</span>的效率要高一些。对于表连接来说，每连接一次新表，
则匹配的次数满足笛卡尔积，成倍的翻。。。
但是<span class="token keyword">union</span>可以减少匹配的次数。在减少匹配次数的情况下，
还可以完成两个结果集的拼接。

a 连接 b 连接 c
a <span class="token number">10</span>条记录
b <span class="token number">10</span>条记录
c <span class="token number">10</span>条记录
匹配次数是：<span class="token number">1000</span>

a 连接 b一个结果：<span class="token number">10</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token comment">--&gt; 100次</span>
a 连接 c一个结果：<span class="token number">10</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token comment">--&gt; 100次</span>
使用<span class="token keyword">union</span>的话是：<span class="token number">100</span>次 <span class="token operator">+</span> <span class="token number">100</span>次 <span class="token operator">=</span> <span class="token number">200</span>次。（<span class="token keyword">union</span>把乘法变成了加法运算）

<span class="token keyword">union</span>在使用的时候有注意事项吗？

<span class="token comment">//错误的：union在进行结果集合并的时候，要求两个结果集的列数相同。</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span>
<span class="token keyword">union</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">;</span>

<span class="token comment">// MYSQL可以，oracle语法严格 ，不可以，报错。要求：结果集合并时列和列的数据类型也要一致。</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span>
<span class="token keyword">union</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h1 id="limit"><a href="#limit" class="header-anchor">#</a> limit</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">limit</span>作用：将查询结果集的一部分取出来。通常使用在分页查询当中。
百度默认：一页显示<span class="token number">10</span>条记录。
分页的作用是为了提高用户的体验，因为一次全部都查出来，用户体验差。可以一页一页翻页看

<span class="token keyword">limit</span>的使用
完整用法：<span class="token keyword">limit</span> startIndex<span class="token punctuation">,</span> length
  startIndex是起始下标，length是长度。
  起始下标从<span class="token number">0</span>开始。

缺省用法：<span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">;</span> 这是取前<span class="token number">5</span>

注意：mysql当中<span class="token keyword">limit</span>在<span class="token keyword">order</span> <span class="token keyword">by</span>之后执行！！！！！！

分页
每页显示<span class="token number">3</span>条记录
第<span class="token number">1</span>页：<span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span>		<span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">]</span>
第<span class="token number">2</span>页：<span class="token keyword">limit</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span>		<span class="token punctuation">[</span><span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">]</span>
第<span class="token number">3</span>页：<span class="token keyword">limit</span> <span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span>		<span class="token punctuation">[</span><span class="token number">6</span> <span class="token number">7</span> <span class="token number">8</span><span class="token punctuation">]</span>
第<span class="token number">4</span>页：<span class="token keyword">limit</span> <span class="token number">9</span><span class="token punctuation">,</span><span class="token number">3</span>		<span class="token punctuation">[</span><span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span><span class="token punctuation">]</span>

每页显示pageSize条记录
第pageNo页：<span class="token keyword">limit</span> <span class="token punctuation">(</span>pageNo <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> pageSize  <span class="token punctuation">,</span> pageSize

<span class="token keyword">public</span> static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>{
  <span class="token comment">// 用户提交过来一个页码，以及每页显示的记录条数</span>
  <span class="token keyword">int</span> pageNo <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//第5页</span>
  <span class="token keyword">int</span> pageSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//每页显示10条</span>

  <span class="token keyword">int</span> startIndex <span class="token operator">=</span> <span class="token punctuation">(</span>pageNo <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> pageSize<span class="token punctuation">;</span>
  String <span class="token keyword">sql</span> <span class="token operator">=</span> <span class="token string">&quot;select ...limit &quot;</span> <span class="token operator">+</span> startIndex <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> pageSize<span class="token punctuation">;</span>
}

记公式：
<span class="token keyword">limit</span> <span class="token punctuation">(</span>pageNo<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>pageSize <span class="token punctuation">,</span> pageSize
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code>关于DQL语句的大总结：
<span class="token keyword">select</span> 
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">from</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">where</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">group</span> <span class="token keyword">by</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">having</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">order</span> <span class="token keyword">by</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">limit</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

执行顺序？
  <span class="token number">1.</span><span class="token keyword">from</span>
  <span class="token number">2.</span><span class="token keyword">where</span>
  <span class="token number">3.</span><span class="token keyword">group</span> <span class="token keyword">by</span>
  <span class="token number">4.</span><span class="token keyword">having</span>
  <span class="token number">5.</span><span class="token keyword">select</span>
  <span class="token number">6.</span><span class="token keyword">order</span> <span class="token keyword">by</span>
  <span class="token number">7.</span><span class="token keyword">limit</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h1 id="表的创建"><a href="#表的创建" class="header-anchor">#</a> 表的创建</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>建表的语法格式：<span class="token punctuation">(</span>建表属于DDL语句，DDL包括：<span class="token keyword">create</span> <span class="token keyword">drop</span> <span class="token keyword">alter</span><span class="token punctuation">)</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>字段名<span class="token number">1</span> 数据类型<span class="token punctuation">,</span> 字段名<span class="token number">2</span> 数据类型<span class="token punctuation">,</span> 字段名<span class="token number">3</span> 数据类型<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
  字段名<span class="token number">1</span> 数据类型<span class="token punctuation">,</span> 
  字段名<span class="token number">2</span> 数据类型<span class="token punctuation">,</span> 
  字段名<span class="token number">3</span> 数据类型
<span class="token punctuation">)</span><span class="token punctuation">;</span>

表名：建议以t_ 或者 tbl_开始，可读性强。见名知意。
字段名：见名知意。
表名和字段名都属于标识符。


关于mysql中的数据类型
很多数据类型，我们只需要掌握一些常见的数据类型即可。

  <span class="token keyword">varchar</span><span class="token punctuation">(</span>最长<span class="token number">255</span><span class="token punctuation">)</span>
    可变长度的字符串
    比较智能，节省空间。
    会根据实际的数据长度动态分配空间。

    优点：节省空间
    缺点：需要动态分配空间，速度慢。

  <span class="token keyword">char</span><span class="token punctuation">(</span>最长<span class="token number">255</span><span class="token punctuation">)</span>
    定长字符串
    不管实际的数据长度是多少。
    分配固定长度的空间去存储数据。
    使用不恰当的时候，可能会导致空间的浪费。

    优点：不需要动态分配空间，速度快。
    缺点：使用不当可能会导致空间的浪费。

   <span class="token keyword">varchar</span> 和 <span class="token keyword">char</span> 我们应该怎么选择？
      性别字段你选什么？因为性别是固定长度的字符串，所以选择<span class="token keyword">char</span>。
      姓名字段你选什么？每一个人的名字长度不同，所以选择<span class="token keyword">varchar</span>。

  <span class="token keyword">int</span><span class="token punctuation">(</span>最长<span class="token number">11</span><span class="token punctuation">)</span>
    数字中的整数型。等同于java的<span class="token keyword">int</span>。

  <span class="token keyword">bigint</span>
    数字中的长整型。等同于java中的long。

  <span class="token keyword">float</span>	
    单精度浮点型数据

  <span class="token keyword">double</span>
    双精度浮点型数据

  <span class="token keyword">date</span>
    短日期类型

  <span class="token keyword">datetime</span>
    长日期类型

  clob 
    字符大对象
    最多可以存储<span class="token number">4</span>G的字符串。
    比如：存储一篇文章，存储一个说明。
    超过<span class="token number">255</span>个字符的都要采用CLOB字符大对象来存储。
    <span class="token keyword">Character</span> Large OBject:CLOB

  <span class="token keyword">blob</span>
    二进制大对象
    <span class="token keyword">Binary</span> Large OBject
    专门用来存储图片、声音、视频等流媒体数据。
    往<span class="token keyword">BLOB</span>类型的字段上插入数据的时候，例如插入一个图片、视频等，
    你需要使用IO流才行。
    
    
创建一个学生表？
    学号、姓名、年龄、性别、邮箱地址
    <span class="token keyword">create</span> <span class="token keyword">table</span> t_student<span class="token punctuation">(</span>
      <span class="token keyword">no</span> <span class="token keyword">int</span><span class="token punctuation">,</span>
      name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      age <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  删除表：
  <span class="token keyword">drop</span> <span class="token keyword">table</span> t_student<span class="token punctuation">;</span> <span class="token comment">// 当这张表不存在的时候会报错！</span>

  <span class="token comment">// 如果这张表存在的话，删除</span>
  <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_student<span class="token punctuation">;</span>
  

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br></div></div><h1 id="插入数据insert"><a href="#插入数据insert" class="header-anchor">#</a> 插入数据insert</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>插入数据<span class="token keyword">insert</span> （DML）
	
语法格式：
  <span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>字段名<span class="token number">1</span><span class="token punctuation">,</span>字段名<span class="token number">2</span><span class="token punctuation">,</span>字段名<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">,</span>值<span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  注意：字段名和值要一一对应。什么是一一对应？
    数量要对应。数据类型要对应。
    
<span class="token keyword">insert</span>语句中的“字段名”可以省略吗？可以
  <span class="token keyword">insert</span> <span class="token keyword">into</span> t_student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//错误的</span>

  <span class="token comment">// 注意：前面的字段名省略的话，等于都写上了！所以值也要都写上！</span>
  <span class="token keyword">insert</span> <span class="token keyword">into</span> t_student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span> <span class="token string">'f'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'lisi@123.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">------+------+------+------+--------------+</span>
  <span class="token operator">|</span> <span class="token keyword">no</span>   <span class="token operator">|</span> name <span class="token operator">|</span> sex  <span class="token operator">|</span> age  <span class="token operator">|</span> email        <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">------+------+------+------+--------------+</span>
  <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> m    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span>
  <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> lisi <span class="token operator">|</span> f    <span class="token operator">|</span>   <span class="token number">20</span> <span class="token operator">|</span> lisi<span class="token variable">@123.com</span> <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">------+------+------+------+--------------+</span>

一次可以插入多条记录：
  <span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>birth<span class="token punctuation">,</span>create_time<span class="token punctuation">)</span> <span class="token keyword">values</span>
  <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'zs'</span><span class="token punctuation">,</span><span class="token string">'1980-10-11'</span><span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'lisi'</span><span class="token punctuation">,</span><span class="token string">'1981-10-11'</span><span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'wangwu'</span><span class="token punctuation">,</span><span class="token string">'1982-10-11'</span><span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  语法：<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>字段名<span class="token number">1</span><span class="token punctuation">,</span>字段名<span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">insert</span>插入日期
	数字格式化：format
	
	格式化数字：<span class="token function">format</span><span class="token punctuation">(</span>数字<span class="token punctuation">,</span> <span class="token string">'格式'</span><span class="token punctuation">)</span>
  <span class="token keyword">select</span> ename<span class="token punctuation">,</span><span class="token function">format</span><span class="token punctuation">(</span>sal<span class="token punctuation">,</span> <span class="token string">'$999,999'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> sal <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

str_to_date：将字符串<span class="token keyword">varchar</span>类型转换成<span class="token keyword">date</span>类型
date_format：将<span class="token keyword">date</span>类型转换成具有一定格式的<span class="token keyword">varchar</span>字符串类型。


插入数据？
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>birth<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token string">'01-10-1990'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1990年10月1日</span>
出问题了：原因是类型不匹配。数据库birth是<span class="token keyword">date</span>类型，这里给了一个字符串<span class="token keyword">varchar</span>。

怎么办？可以使用str_to_date函数进行类型转换。
str_to_date函数可以将字符串转换成日期类型<span class="token keyword">date</span>？
语法格式：
  str_to_date<span class="token punctuation">(</span><span class="token string">'字符串日期'</span><span class="token punctuation">,</span> <span class="token string">'日期格式'</span><span class="token punctuation">)</span>

mysql的日期格式：
  <span class="token operator">%</span>Y	年
  <span class="token operator">%</span>m    月
  <span class="token operator">%</span>d    日
  <span class="token operator">%</span>h	时
  <span class="token operator">%</span>i	分
  <span class="token operator">%</span>s	秒

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>birth<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span> str_to_date<span class="token punctuation">(</span><span class="token string">'01-10-1990'</span><span class="token punctuation">,</span><span class="token string">'%d-%m-%Y'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

str_to_date函数可以把字符串<span class="token keyword">varchar</span>转换成日期<span class="token keyword">date</span>类型数据，
通常使用在插入<span class="token keyword">insert</span>方面，因为插入的时候需要一个日期类型的数据，
需要通过该函数将字符串转换成<span class="token keyword">date</span>。

如果你提供的日期字符串是这个格式，str_to_date函数就不需要了！！！
  <span class="token operator">%</span>Y<span class="token operator">-</span><span class="token operator">%</span>m<span class="token operator">-</span><span class="token operator">%</span>d
<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>birth<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'lisi'</span><span class="token punctuation">,</span> <span class="token string">'1990-10-01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

查询的时候可以以某个特定的日期格式展示吗？
date_format
这个函数可以将日期类型转换成特定格式的字符串。

<span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>date_format<span class="token punctuation">(</span>birth<span class="token punctuation">,</span> <span class="token string">'%m/%d/%Y'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> birth <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+----------+------------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name     <span class="token operator">|</span> birth      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> zhangsan <span class="token operator">|</span> <span class="token number">10</span><span class="token operator">/</span><span class="token number">01</span><span class="token operator">/</span><span class="token number">1990</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> lisi     <span class="token operator">|</span> <span class="token number">10</span><span class="token operator">/</span><span class="token number">01</span><span class="token operator">/</span><span class="token number">1990</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------------+</span>

date_format函数怎么用？
  date_format<span class="token punctuation">(</span>日期类型数据<span class="token punctuation">,</span> <span class="token string">'日期格式'</span><span class="token punctuation">)</span>
  这个函数通常使用在查询日期方面。设置展示的日期格式。

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>birth <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+----------+------------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name     <span class="token operator">|</span> birth      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> zhangsan <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> lisi     <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------------+</span>
以上的<span class="token keyword">SQL</span>语句实际上是进行了默认的日期格式化，
自动将数据库中的<span class="token keyword">date</span>类型转换成<span class="token keyword">varchar</span>类型。
并且采用的格式是mysql默认的日期格式：<span class="token string">'%Y-%m-%d'</span>

<span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>date_format<span class="token punctuation">(</span>birth<span class="token punctuation">,</span><span class="token string">'%Y/%m/%d'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> birth <span class="token keyword">from</span> t_user<span class="token punctuation">;</span>

java中的日期格式？
  yyyy<span class="token operator">-</span>MM<span class="token operator">-</span>dd HH:mm:ss SSS


<span class="token keyword">date</span>和<span class="token keyword">datetime</span>两个类型的区别？
	<span class="token keyword">date</span>是短日期：只包括年月日信息。
	<span class="token keyword">datetime</span>是长日期：包括年月日时分秒信息。
	mysql短日期默认格式：<span class="token operator">%</span>Y<span class="token operator">-</span><span class="token operator">%</span>m<span class="token operator">-</span><span class="token operator">%</span>d
	mysql长日期默认格式：<span class="token operator">%</span>Y<span class="token operator">-</span><span class="token operator">%</span>m<span class="token operator">-</span><span class="token operator">%</span>d <span class="token operator">%</span>h:<span class="token operator">%</span>i:<span class="token operator">%</span>s
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br></div></div><h1 id="修改update"><a href="#修改update" class="header-anchor">#</a> 修改update</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>语法格式：
<span class="token keyword">update</span> 表名 <span class="token keyword">set</span> 字段名<span class="token number">1</span><span class="token operator">=</span>值<span class="token number">1</span><span class="token punctuation">,</span>字段名<span class="token number">2</span><span class="token operator">=</span>值<span class="token number">2</span><span class="token punctuation">,</span>字段名<span class="token number">3</span><span class="token operator">=</span>值<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">where</span> 条件<span class="token punctuation">;</span>

注意：没有条件限制会导致所有数据全部更新。

<span class="token keyword">update</span> t_user <span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">'jack'</span><span class="token punctuation">,</span> birth <span class="token operator">=</span> <span class="token string">'2000-10-11'</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+----------+------------+---------------------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name     <span class="token operator">|</span> birth      <span class="token operator">|</span> create_time         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------------+---------------------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> zhangsan <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">49</span>:<span class="token number">50</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> jack     <span class="token operator">|</span> <span class="token number">2000</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">11</span> <span class="token operator">|</span> <span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">51</span>:<span class="token number">23</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------+------------+---------------------+</span>

<span class="token keyword">update</span> t_user <span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">'jack'</span><span class="token punctuation">,</span> birth <span class="token operator">=</span> <span class="token string">'2000-10-11'</span><span class="token punctuation">,</span> create_time <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

更新所有？
  <span class="token keyword">update</span> t_user <span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h1 id="删除数据-delete"><a href="#删除数据-delete" class="header-anchor">#</a> 删除数据 delete</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>语法格式？
  <span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 条件<span class="token punctuation">;</span>

注意：没有条件，整张表的数据会全部删除！

<span class="token keyword">delete</span> <span class="token keyword">from</span> t_user <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> t_user<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">delete</span> <span class="token keyword">from</span> t_user<span class="token punctuation">;</span> <span class="token comment">// 删除所有！</span>

快速删除表中的数据？【<span class="token keyword">truncate</span>比较重要，必须掌握】

<span class="token comment">//删除dept_bak表中的数据</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> dept_bak<span class="token punctuation">;</span> <span class="token comment">//这种删除数据的方式比较慢。</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept_bak<span class="token punctuation">;</span>
Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token keyword">delete</span>语句删除数据的原理？（<span class="token keyword">delete</span>属于DML语句！！！）
  表中的数据被删除了，但是这个数据在硬盘上的真实存储空间不会被释放！！！
  这种删除缺点是：删除效率比较低。
  这种删除优点是：支持回滚，后悔了可以再恢复数据！！！

<span class="token keyword">truncate</span>语句删除数据的原理？
  这种删除效率比较高，表被一次截断，物理删除。
  这种删除缺点：不支持回滚。
  这种删除优点：快速。

用法：<span class="token keyword">truncate</span> <span class="token keyword">table</span> dept_bak<span class="token punctuation">;</span> （这种操作属于DDL操作。）

大表非常大，上亿条记录？？？？
  删除的时候，使用<span class="token keyword">delete</span>，也许需要执行<span class="token number">1</span>个小时才能删除完！效率较低。
  可以选择使用<span class="token keyword">truncate</span>删除表中的数据。只需要不到<span class="token number">1</span>秒钟的时间就删除结束。效率较高。
  但是使用<span class="token keyword">truncate</span>之前，必须仔细询问客户是否真的要删除，并警告删除之后不可恢复！

  <span class="token keyword">truncate</span>是删除表中的数据，表还在！

删除表操作？
  <span class="token keyword">drop</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span> <span class="token comment">// 这不是删除表中的数据，这是把表删除。</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h1 id="约束"><a href="#约束" class="header-anchor">#</a> 约束</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>什么是约束？
约束对应的英语单词： <span class="token keyword">constraint</span>
在创建表的时候，我们可以给表中的字段加上一些约束，来保证这个表中数据的
完整性、有效性！！！

约束的作用就是为了保证：表中的数据有效！！

约束包括哪些？
非空约束：<span class="token operator">not</span> <span class="token boolean">null</span>
唯一性约束: <span class="token keyword">unique</span>
主键约束: <span class="token keyword">primary</span> <span class="token keyword">key</span> （简称PK）
外键约束：<span class="token keyword">foreign</span> <span class="token keyword">key</span>（简称FK）
检查约束：<span class="token keyword">check</span>（mysql不支持，oracle支持）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="非空约束-not-null"><a href="#非空约束-not-null" class="header-anchor">#</a> 非空约束：not null</h2> <blockquote><p>唯一性约束unique约束的字段不能重复，但是可以为NULL。</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_vip<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_vip<span class="token punctuation">(</span>
  id <span class="token keyword">int</span><span class="token punctuation">,</span>
  name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span>  <span class="token comment">// not null只有列级约束，没有表级约束！</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="唯一性约束-unique"><a href="#唯一性约束-unique" class="header-anchor">#</a> 唯一性约束: unique</h2> <blockquote><p>唯一性约束unique约束的字段不能重复，但是可以为NULL。</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>唯一性约束<span class="token keyword">unique</span>约束的字段不能重复，但是可以为<span class="token boolean">NULL</span>。
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_vip<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_vip<span class="token punctuation">(</span>
  id <span class="token keyword">int</span><span class="token punctuation">,</span>
  name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
  email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

如何做到联合唯一约束
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_vip<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_vip<span class="token punctuation">(</span>
  id <span class="token keyword">int</span><span class="token punctuation">,</span>
  name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">unique</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>email<span class="token punctuation">)</span> <span class="token comment">// 约束没有添加在列的后面，这种约束被称为表级约束。</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
name和email两个字段联合起来唯一
在mysql当中，如果一个字段同时被<span class="token operator">not</span> <span class="token boolean">null</span>和<span class="token keyword">unique</span>约束的话，该字段自动变成主键字段。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="主键约束-primary-key"><a href="#主键约束-primary-key" class="header-anchor">#</a> 主键约束: primary key</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>主键约束的相关术语？
  主键约束：就是一种约束。
  主键字段：该字段上添加了主键约束，这样的字段叫做：主键字段
  主键值：主键字段中的每一个值都叫做：主键值。

什么是主键？有啥用？
  主键值是每一行记录的唯一标识。
  主键值是每一行记录的身份证号！！！

记住：任何一张表都应该有主键，没有主键，表无效！！

主键的特征：<span class="token operator">not</span> <span class="token boolean">null</span> <span class="token operator">+</span> <span class="token keyword">unique</span>（主键值不能是<span class="token boolean">NULL</span>，同时也不能重复！）

怎么给一张表添加主键约束呢？
  <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_vip<span class="token punctuation">;</span>
  <span class="token comment">// 1个字段做主键，叫做：单一主键</span>
  <span class="token keyword">create</span> <span class="token keyword">table</span> t_vip<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>  <span class="token comment">//列级约束</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

表级约束主要是给多个字段联合起来添加约束？
  <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_vip<span class="token punctuation">;</span>
  <span class="token comment">// id和name联合起来做主键：复合主键！！！！</span>
  <span class="token keyword">create</span> <span class="token keyword">table</span> t_vip<span class="token punctuation">(</span>
    id <span class="token keyword">int</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  
在实际开发中不建议使用：复合主键。建议使用单一主键！
因为主键值存在的意义就是这行记录的身份证号，只要意义达到即可，单一主键可以做到。
复合主键比较复杂，不建议使用！！！

主键值建议使用：
  <span class="token keyword">int</span>
  <span class="token keyword">bigint</span>
  <span class="token keyword">char</span>
  等类型。

不建议使用：<span class="token keyword">varchar</span>来做主键。主键值一般都是数字，一般都是定长的！

主键除了：单一主键和复合主键之外，还可以这样进行分类？
  自然主键：主键值是一个自然数，和业务没关系。
  业务主键：主键值和业务紧密关联，例如拿银行卡账号做主键值。这就是业务主键！

在实际开发中使用业务主键多，还是使用自然主键多一些？
  自然主键使用比较多，因为主键只要做到不重复就行，不需要有意义。
  业务主键不好，因为主键一旦和业务挂钩，那么当业务发生变动的时候，
  可能会影响到主键值，所以业务主键不建议使用。尽量使用自然主键。
  
在mysql当中，有一种机制，可以帮助我们自动维护一个主键值？
		<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> t_vip<span class="token punctuation">;</span>
		<span class="token keyword">create</span> <span class="token keyword">table</span> t_vip<span class="token punctuation">(</span>
			id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> <span class="token comment">//auto_increment表示自增，从1开始，以1递增！</span>
			name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h2 id="外键约束-foreign-key"><a href="#外键约束-foreign-key" class="header-anchor">#</a> 外键约束：foreign key</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>外键约束涉及到的相关术语：
  外键约束：一种约束（ <span class="token keyword">foreign</span> <span class="token keyword">key</span>）
  外键字段：该字段上添加了外键约束
  外键值：外键字段当中的每一个值。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h1 id="存储引擎"><a href="#存储引擎" class="header-anchor">#</a> 存储引擎</h1> <blockquote><p>什么是存储引擎，有什么用呢？</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>存储引擎是MySQL中特有的一个术语，其它数据库中没有。（Oracle中有，但是不叫这个名字）
存储引擎这个名字高端大气上档次。实际上存储引擎是一个表存储<span class="token operator">/</span>组织数据的方式。
不同的存储引擎，表存储数据的方式不同。

怎么给表添加<span class="token operator">/</span>指定“存储引擎”呢？
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> t_student<span class="token punctuation">;</span>

可以在建表的时候给表指定存储引擎。
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>t_student<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>no<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>cno<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>no<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>cno<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>cno<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">CONSTRAINT</span> <span class="token identifier"><span class="token punctuation">`</span>t_student_ibfk_1<span class="token punctuation">`</span></span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>cno<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token identifier"><span class="token punctuation">`</span>t_class<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>classno<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">11</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8

在建表的时候可以在最后小括号的<span class="token string">&quot;)&quot;</span>的右边使用：
  <span class="token keyword">ENGINE</span>来指定存储引擎。
  <span class="token keyword">CHARSET</span>来指定这张表的字符编码方式。
	
结论：
  mysql默认的存储引擎是：<span class="token keyword">InnoDB</span>
  mysql默认的字符编码方式是：utf8
  
怎么查看mysql支持哪些存储引擎呢？
命令： <span class="token keyword">show</span> engines \G

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="myisam存储引擎"><a href="#myisam存储引擎" class="header-anchor">#</a> MyISAM存储引擎</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>它管理的表具有以下特征：
  使用三个文件表示每个表：
    格式文件 — 存储表结构的定义（mytable<span class="token punctuation">.</span>frm）
    数据文件 — 存储表行的内容（mytable<span class="token punctuation">.</span>MYD）
    索引文件 — 存储表上索引（mytable<span class="token punctuation">.</span>MYI）：索引是一本书的目录，缩小扫描范围，提高查询效率的一种机制。
  可被转换为压缩、只读表来节省空间

  提示一下：
    对于一张表来说，只要是主键，
    或者加有<span class="token keyword">unique</span>约束的字段上会自动创建索引。

  MyISAM存储引擎特点：
    可被转换为压缩、只读表来节省空间
    这是这种存储引擎的优势！！！！
  
  MyISAM不支持事务机制，安全性低。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="innodb存储引擎"><a href="#innodb存储引擎" class="header-anchor">#</a> InnoDB存储引擎</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>这是mysql默认的存储引擎，同时也是一个重量级的存储引擎。
<span class="token keyword">InnoDB</span>支持事务，支持数据库崩溃后自动恢复机制。
<span class="token keyword">InnoDB</span>存储引擎最主要的特点是：非常安全。

它管理的表具有下列主要特征：
  – 每个 <span class="token keyword">InnoDB</span> 表在数据库目录中以<span class="token punctuation">.</span>frm 格式文件表示
  – <span class="token keyword">InnoDB</span> 表空间 <span class="token keyword">tablespace</span> 被用于存储表的内容（表空间是一个逻辑名称。表空间存储数据<span class="token operator">+</span>索引。）

  – 提供一组用来记录事务性活动的日志文件
  – 用 <span class="token keyword">COMMIT</span><span class="token punctuation">(</span>提交<span class="token punctuation">)</span>、<span class="token keyword">SAVEPOINT</span> 及<span class="token keyword">ROLLBACK</span><span class="token punctuation">(</span>回滚<span class="token punctuation">)</span>支持事务处理
  – 提供全 ACID 兼容
  – 在 MySQL 服务器崩溃后提供自动恢复
  – 多版本（MVCC）和行级锁定
  – 支持外键及引用的完整性，包括级联删除和更新

<span class="token keyword">InnoDB</span>最大的特点就是支持事务：
  以保证数据的安全。效率不是很高，并且也不能压缩，不能转换为只读，
  不能很好的节省存储空间。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="memory存储引擎"><a href="#memory存储引擎" class="header-anchor">#</a> MEMORY存储引擎</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>使用 MEMORY 存储引擎的表，其数据存储在内存中，且行的长度固定，
这两个特点使得 MEMORY 存储引擎非常快。

MEMORY 存储引擎管理的表具有下列特征：
  – 在数据库目录内，每个表均以<span class="token punctuation">.</span>frm 格式的文件表示。
  – 表数据及索引被存储在内存中。（目的就是快，查询快！）
  – 表级锁机制。
  – 不能包含 <span class="token keyword">TEXT</span> 或 <span class="token keyword">BLOB</span> 字段。

MEMORY 存储引擎以前被称为HEAP 引擎。

MEMORY引擎优点：查询效率是最高的。不需要和硬盘交互。
MEMORY引擎缺点：不安全，关机之后数据消失。因为数据和索引都是在内存当中。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h1 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>什么是事务？

一个事务其实就是一个完整的业务逻辑。
是一个最小的工作单元。不可再分。

什么是一个完整的业务逻辑？
  假设转账，从A账户向B账户中转账<span class="token number">10000.</span>
  将A账户的钱减去<span class="token number">10000</span>（<span class="token keyword">update</span>语句）
  将B账户的钱加上<span class="token number">10000</span>（<span class="token keyword">update</span>语句）
  这就是一个完整的业务逻辑。

  以上的操作是一个最小的工作单元，要么同时成功，要么同时失败，不可再分。
  这两个<span class="token keyword">update</span>语句要求必须同时成功或者同时失败，这样才能保证钱是正确的。

只有DML语句才会有事务这一说，其它语句和事务无关！！！
<span class="token keyword">insert</span>
<span class="token keyword">delete</span>
<span class="token keyword">update</span>
只有以上的三个语句和事务有关系，其它都没有关系。

因为 只有以上的三个语句是数据库表中数据进行增、删、改的。
只要你的操作一旦涉及到数据的增、删、改，那么就一定要考虑安全问题。


<span class="token keyword">InnoDB</span>存储引擎：提供一组用来记录事务性活动的日志文件

事务开启了：
<span class="token keyword">insert</span>
<span class="token keyword">insert</span>
<span class="token keyword">insert</span>
<span class="token keyword">delete</span>
<span class="token keyword">update</span>
<span class="token keyword">update</span>
<span class="token keyword">update</span>
事务结束了！

在事务的执行过程中，每一条DML的操作都会记录到“事务性活动的日志文件”中。
在事务的执行过程中，我们可以提交事务，也可以回滚事务。

提交事务？
  清空事务性活动的日志文件，将数据全部彻底持久化到数据库表中。
  提交事务标志着，事务的结束。并且是一种全部成功的结束。

回滚事务？
  将之前所有的DML操作全部撤销，并且清空事务性活动的日志文件
  回滚事务标志着，事务的结束。并且是一种全部失败的结束。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="提交事务、回滚事务"><a href="#提交事务、回滚事务" class="header-anchor">#</a> 提交事务、回滚事务</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>提交事务：<span class="token keyword">commit</span><span class="token punctuation">;</span> 语句
回滚事务：<span class="token keyword">rollback</span><span class="token punctuation">;</span> 语句（回滚永远都是只能回滚到上一次的提交点！）

事务对应的英语单词是：<span class="token keyword">transaction</span>

测试一下，在mysql当中默认的事务行为是怎样的？
  mysql默认情况下是支持自动提交事务的。（自动提交）
  什么是自动提交？
    每执行一条DML语句，则提交一次！

  这种自动提交实际上是不符合我们的开发习惯，因为一个业务
  通常是需要多条DML语句共同执行才能完成的，为了保证数据
  的安全，必须要求同时成功之后再提交，所以不能执行一条
  就提交一条。

怎么将mysql的自动提交机制关闭掉呢？
  先执行这个命令：<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>代码演示</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>演示事务：
  <span class="token comment">---------------------------------回滚事务----------------------------------------</span>
  mysql<span class="token operator">&gt;</span> <span class="token keyword">use</span> bjpowernode<span class="token punctuation">;</span>
  <span class="token keyword">Database</span> changed
  mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept_bak<span class="token punctuation">;</span>
  Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>
  Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> dept_bak <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'tj'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> dept_bak <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'tj'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept_bak<span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME <span class="token operator">|</span> LOC  <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> abc   <span class="token operator">|</span> tj   <span class="token operator">|</span>
  <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> abc   <span class="token operator">|</span> tj   <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">rollback</span><span class="token punctuation">;</span>
  Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept_bak<span class="token punctuation">;</span>
  Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>


  <span class="token comment">---------------------------------提交事务----------------------------------------</span>
  mysql<span class="token operator">&gt;</span> <span class="token keyword">use</span> bjpowernode<span class="token punctuation">;</span>
  <span class="token keyword">Database</span> changed
  mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept_bak<span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME <span class="token operator">|</span> LOC  <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> abc   <span class="token operator">|</span> bj   <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>
  Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> dept_bak <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'abc
  Query OK, 1 row affected (0.00 sec)

  mysql&gt; insert into dept_bak values(20,'</span>abc
  Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> dept_bak <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span>'abc
  Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">commit</span><span class="token punctuation">;</span>
  Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept_bak<span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME <span class="token operator">|</span> LOC  <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> abc   <span class="token operator">|</span> bj   <span class="token operator">|</span>
  <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> abc   <span class="token operator">|</span> tj   <span class="token operator">|</span>
  <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> abc   <span class="token operator">|</span> tj   <span class="token operator">|</span>
  <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> abc   <span class="token operator">|</span> tj   <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">rollback</span><span class="token punctuation">;</span>
  Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept_bak<span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME <span class="token operator">|</span> LOC  <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> abc   <span class="token operator">|</span> bj   <span class="token operator">|</span>
  <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> abc   <span class="token operator">|</span> tj   <span class="token operator">|</span>
  <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> abc   <span class="token operator">|</span> tj   <span class="token operator">|</span>
  <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> abc   <span class="token operator">|</span> tj   <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">--------+-------+------+</span>
  <span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br></div></div><h2 id="事务四个特性"><a href="#事务四个特性" class="header-anchor">#</a> 事务四个特性</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>A：原子性
  说明事务是最小的工作单元。不可再分。

C：一致性
  所有事务要求，在同一个事务当中，所有操作必须同时成功，或者同时失败，
  以保证数据的一致性。

I：隔离性
  A事务和B事务之间具有一定的隔离。
  教室A和教室B之间有一道墙，这道墙就是隔离性。
  A事务在操作一张表的时候，另一个事务B也操作这张表会那样？？？

D：持久性
  事务最终结束的一个保障。事务提交，就相当于将没有保存到硬盘上的数据
  保存到硬盘上！
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="事务的隔离性"><a href="#事务的隔离性" class="header-anchor">#</a> 事务的隔离性</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>A教室和B教室中间有一道墙，这道墙可以很厚，也可以很薄。这就是事务的隔离级别。
这道墙越厚，表示隔离级别就越高。

事务和事务之间的隔离级别有哪些呢？<span class="token number">4</span>个级别

读未提交：<span class="token keyword">read</span> <span class="token keyword">uncommitted</span>（最低的隔离级别）《没有提交就读到了》
  什么是读未提交？
    事务A可以读取到事务B未提交的数据。
  这种隔离级别存在的问题就是：
    脏读现象！<span class="token punctuation">(</span>Dirty <span class="token keyword">Read</span><span class="token punctuation">)</span>
    我们称读到了脏数据。
  这种隔离级别一般都是理论上的，大多数的数据库隔离级别都是二档起步！

读已提交：<span class="token keyword">read</span> <span class="token keyword">committed</span>《提交之后才能读到》
  什么是读已提交？
    事务A只能读取到事务B提交之后的数据。
  这种隔离级别解决了什么问题？
    解决了脏读的现象。
  这种隔离级别存在什么问题？
    不可重复读取数据。
    什么是不可重复读取数据呢？
      在事务开启之后，第一次读到的数据是<span class="token number">3</span>条，当前事务还没有
      结束，可能第二次再读取的时候，读到的数据是<span class="token number">4</span>条，<span class="token number">3</span>不等于<span class="token number">4</span>
      称为不可重复读取。

  这种隔离级别是比较真实的数据，每一次读到的数据是绝对的真实。
  oracle数据库默认的隔离级别是：<span class="token keyword">read</span> <span class="token keyword">committed</span>

可重复读：repeatableread《提交之后也读不到，永远读取的都是刚开启事务时的数据》
  什么是可重复读取？
    事务A开启之后，不管是多久，每一次在事务A中读取到的数据
    都是一致的。即使事务B将数据已经修改，并且提交了，事务A
    读取到的数据还是没有发生改变，这就是可重复读。
  可重复读解决了什么问题？
    解决了不可重复读取数据。
  可重复读存在的问题是什么？
    可以会出现幻影读。
    每一次读取到的数据都是幻象。不够真实！
  
  早晨<span class="token number">9</span>点开始开启了事务，只要事务不结束，到晚上<span class="token number">9</span>点，读到的数据还是那样！
  读到的是假象。不够绝对的真实。

  mysql中默认的事务隔离级别就是这个！！！！！！！！！！！

序列化<span class="token operator">/</span>串行化：<span class="token keyword">serializable</span>（最高的隔离级别）
  这是最高隔离级别，效率最低。解决了所有的问题。
  这种隔离级别表示事务排队，不能并发！
  synchronized，线程同步（事务同步）
  每一次读取到的数据都是最真实的，并且效率是最低的。

查看隔离级别：<span class="token keyword">SELECT</span> @<span class="token variable">@tx_isolation</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>
<span class="token operator">|</span> @<span class="token variable">@tx_isolation</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>
<span class="token operator">|</span> <span class="token keyword">REPEATABLE</span><span class="token operator">-</span><span class="token keyword">READ</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>
mysql默认的隔离级别
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><h1 id="索引-index"><a href="#索引-index" class="header-anchor">#</a> 索引（index）</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>什么是索引？
索引是在数据库表的字段上添加的，是为了提高查询效率存在的一种机制。
一张表的一个字段可以添加一个索引，当然，多个字段联合起来也可以添加索引。
索引相当于一本书的目录，是为了缩小扫描范围而存在的一种机制。

对于一本字典来说，查找某个汉字有两种方式：
  第一种方式：一页一页挨着找，直到找到为止，这种查找方式属于全字典扫描。
  效率比较低。
  第二种方式：先通过目录（索引）去定位一个大概的位置，然后直接定位到这个
  位置，做局域性扫描，缩小扫描的范围，快速的查找。这种查找方式属于通过
  索引检索，效率较高。
  
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_user <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'jack'</span><span class="token punctuation">;</span>

以上的这条<span class="token keyword">SQL</span>语句会去name字段上扫描，为什么？
  因为查询条件是：name<span class="token operator">=</span><span class="token string">'jack'</span>

如果name字段上没有添加索引（目录），或者说没有给name字段创建索引，
MySQL会进行全扫描，会将name字段上的每一个值都比对一遍。效率比较低。

MySQL在查询方面主要就是两种方式：
  第一种方式：全表扫描
  第二种方式：根据索引检索。

注意：
  在实际中，汉语字典前面的目录是排序的，按照a b c d e f<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>排序，
  为什么排序呢？因为只有排序了才会有区间查找这一说！（缩小扫描范围
  其实就是扫描某个区间罢了！）

  在mysql数据库当中索引也是需要排序的，并且这个所以的排序和TreeSet
  数据结构相同。TreeSet（TreeMap）底层是一个自平衡的二叉树！在mysql
  当中索引是一个B<span class="token operator">-</span>Tree数据结构。

  遵循左小又大原则存放。采用中序遍历方式遍历取数据。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="实现原理"><a href="#实现原理" class="header-anchor">#</a> 实现原理</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>假设有一张用户表：t_user

id<span class="token punctuation">(</span>PK<span class="token punctuation">)</span>					name						每一行记录在硬盘上都有物理存储编号
<span class="token comment">----------------------------------------------------------------------------------</span>
<span class="token number">100</span>						zhangsan					<span class="token number">0x1111</span>
<span class="token number">120</span>						lisi						<span class="token number">0x2222</span>
<span class="token number">99</span>							wangwu					<span class="token number">0x8888</span>
<span class="token number">88</span>							zhaoliu					<span class="token number">0x9999</span>
<span class="token number">101</span>						jack						<span class="token number">0x6666</span>
<span class="token number">55</span>							lucy						<span class="token number">0x5555</span>
<span class="token number">130</span>						tom						<span class="token number">0x7777</span>

提醒<span class="token number">1</span>：在任何数据库当中主键上都会自动添加索引对象，id字段上自动有索引，
因为id是PK。另外在mysql当中，一个字段上如果有<span class="token keyword">unique</span>约束的话，也会自动
创建索引对象。

提醒<span class="token number">2</span>：在任何数据库当中，任何一张表的任何一条记录在硬盘存储上都有
一个硬盘的物理存储编号。

提醒<span class="token number">3</span>：在mysql当中，索引是一个单独的对象，不同的存储引擎以不同的形式
存在，在MyISAM存储引擎中，索引存储在一个<span class="token punctuation">.</span>MYI文件中。在<span class="token keyword">InnoDB</span>存储引擎中
索引存储在一个逻辑名称叫做<span class="token keyword">tablespace</span>的当中。在MEMORY存储引擎当中索引
被存储在内存当中。不管索引存储在哪里，索引在mysql当中都是一个树的形式
存在。（自平衡二叉树：B<span class="token operator">-</span>Tree）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="添加索引的条件"><a href="#添加索引的条件" class="header-anchor">#</a> 添加索引的条件</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>什么条件下，我们会考虑给字段添加索引呢？
条件<span class="token number">1</span>：数据量庞大（到底有多么庞大算庞大，这个需要测试，因为每一个硬件环境不同）
条件<span class="token number">2</span>：该字段经常出现在<span class="token keyword">where</span>的后面，以条件的形式存在，也就是说这个字段总是被扫描。
条件<span class="token number">3</span>：该字段很少的DML<span class="token punctuation">(</span><span class="token keyword">insert</span> <span class="token keyword">delete</span> <span class="token keyword">update</span><span class="token punctuation">)</span>操作。（因为DML之后，索引需要重新排序。）

建议不要随意添加索引，因为索引也是需要维护的，太多的话反而会降低系统的性能。
建议通过主键查询，建议通过<span class="token keyword">unique</span>约束的字段进行查询，效率是比较高的。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="索引的创建和删除"><a href="#索引的创建和删除" class="header-anchor">#</a> 索引的创建和删除</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>创建索引：
  mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">index</span> emp_ename_index <span class="token keyword">on</span> emp<span class="token punctuation">(</span>ename<span class="token punctuation">)</span><span class="token punctuation">;</span>
  给emp表的ename字段添加索引，起名：emp_ename_index

删除索引：
  mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">index</span> emp_ename_index <span class="token keyword">on</span> emp<span class="token punctuation">;</span>
  将emp表上的emp_ename_index索引对象删除。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="是否使用索引进行检索"><a href="#是否使用索引进行检索" class="header-anchor">#</a> 是否使用索引进行检索</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token number">1.5</span>、在mysql当中，怎么查看一个<span class="token keyword">SQL</span>语句是否使用了索引进行检索？

mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'KING'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> emp   <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">14</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>
扫描<span class="token number">14</span>条记录：说明没有使用索引。<span class="token keyword">type</span><span class="token operator">=</span><span class="token keyword">ALL</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">index</span> emp_ename_index <span class="token keyword">on</span> emp<span class="token punctuation">(</span>ename<span class="token punctuation">)</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'KING'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------+-----------------+-----------------+---------+-------+------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys   <span class="token operator">|</span> <span class="token keyword">key</span>             <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------+-----------------+-----------------+---------+-------+------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> emp   <span class="token operator">|</span> ref  <span class="token operator">|</span> emp_ename_index <span class="token operator">|</span> emp_ename_index <span class="token operator">|</span> <span class="token number">33</span>      <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------+-----------------+-----------------+---------+-------+------+-------------+</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="索引失效的情况"><a href="#索引失效的情况" class="header-anchor">#</a> 索引失效的情况</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>索引有失效的时候，什么时候索引失效呢？

失效的第<span class="token number">1</span>种情况：
  <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%T'</span><span class="token punctuation">;</span>

  ename上即使添加了索引，也不会走索引，为什么？
    原因是因为模糊匹配当中以“<span class="token operator">%</span>”开头了！
    尽量避免模糊查询的时候以“<span class="token operator">%</span>”开始。
    这是一种优化的手段<span class="token operator">/</span>策略。

  mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%T'</span><span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>
  <span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> Extra       <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>
  <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> emp   <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">14</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>

失效的第<span class="token number">2</span>种情况：
  使用<span class="token operator">or</span>的时候会失效，如果使用<span class="token operator">or</span>那么要求<span class="token operator">or</span>两边的条件字段都要有
  索引，才会走索引，如果其中一边有一个字段没有索引，那么另一个
  字段上的索引也会实现。所以这就是为什么不建议使用<span class="token operator">or</span>的原因。

  mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'KING'</span> <span class="token operator">or</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span><span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+-----------------+------+---------+------+------+-------------+</span>
  <span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys   <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> Extra       <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+-----------------+------+---------+------+------+-------------+</span>
  <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> emp   <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> emp_ename_index <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">14</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+-----------------+------+---------+------+------+-------------+</span>

失效的第<span class="token number">3</span>种情况：
  使用复合索引的时候，没有使用左侧的列查找，索引失效
  什么是复合索引？
    两个字段，或者更多的字段联合起来添加一个索引，叫做复合索引。
  
  <span class="token keyword">create</span> <span class="token keyword">index</span> emp_job_sal_index <span class="token keyword">on</span> emp<span class="token punctuation">(</span>job<span class="token punctuation">,</span>sal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span><span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+-------------------+-------------------+---------+-------+------+-------------+</span>
  <span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys     <span class="token operator">|</span> <span class="token keyword">key</span>               <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> Extra       <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+-------------------+-------------------+---------+-------+------+-------------+</span>
  <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> emp   <span class="token operator">|</span> ref  <span class="token operator">|</span> emp_job_sal_index <span class="token operator">|</span> emp_job_sal_index <span class="token operator">|</span> <span class="token number">30</span>      <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+-------------------+-------------------+---------+-------+------+-------------+</span>
  
  mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>
  <span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> Extra       <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>
  <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> emp   <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">14</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>

失效的第<span class="token number">4</span>种情况：
  在<span class="token keyword">where</span>当中索引列参加了运算，索引失效。
  mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">index</span> emp_sal_index <span class="token keyword">on</span> emp<span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+---------------+---------+-------+------+-------------+</span>
  <span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>           <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> Extra       <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+---------------+---------+-------+------+-------------+</span>
  <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> emp   <span class="token operator">|</span> ref  <span class="token operator">|</span> emp_sal_index <span class="token operator">|</span> emp_sal_index <span class="token operator">|</span> <span class="token number">9</span>       <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+---------------+---------+-------+------+-------------+</span>

  mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">=</span> <span class="token number">800</span><span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>
  <span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> Extra       <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>
  <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> emp   <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">14</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>

失效的第<span class="token number">5</span>种情况：
  在<span class="token keyword">where</span>当中索引列使用了函数
  <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> lower<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">'smith'</span><span class="token punctuation">;</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>
  <span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> Extra       <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>
  <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> emp   <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">14</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
  <span class="token operator">+</span><span class="token comment">----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br></div></div><h2 id="索引分类"><a href="#索引分类" class="header-anchor">#</a> 索引分类</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>单一索引：一个字段上添加索引。
复合索引：两个字段或者更多的字段上添加索引。

主键索引：主键上添加索引。
唯一性索引：具有<span class="token keyword">unique</span>约束的字段上添加索引。
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

注意：唯一性比较弱的字段上添加索引用处不大。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h1 id="视图"><a href="#视图" class="header-anchor">#</a> 视图</h1> <blockquote><p>什么是视图？</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>视图：站在不同的角度去看待同一份数据。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="视图创建和删除"><a href="#视图创建和删除" class="header-anchor">#</a> 视图创建和删除</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>创建视图对象：
  <span class="token keyword">create</span> <span class="token keyword">view</span> dept2_view <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept2<span class="token punctuation">;</span>

删除视图对象：
  <span class="token keyword">drop</span> <span class="token keyword">view</span> dept2_view<span class="token punctuation">;</span>

注意：只有DQL语句才能以<span class="token keyword">view</span>的形式创建。
  <span class="token keyword">create</span> <span class="token keyword">view</span> view_name <span class="token keyword">as</span> 这里的语句必须是DQL语句<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="视图的用途"><a href="#视图的用途" class="header-anchor">#</a> 视图的用途</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>《方便，简化开发，利于维护》
我们可以面向视图对象进行增删改查，对视图对象的增删改查，会导致
原表被操作！（视图的特点：通过对视图的操作，会影响到原表数据。）

<span class="token comment">//面向视图查询</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept2_view<span class="token punctuation">;</span> 

<span class="token comment">// 面向视图插入</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> dept2_view<span class="token punctuation">(</span>deptno<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>loc<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token string">'SALES'</span><span class="token punctuation">,</span> <span class="token string">'BEIJING'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查询原表数据</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept2<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
<span class="token operator">|</span> DEPTNO <span class="token operator">|</span> DNAME      <span class="token operator">|</span> LOC      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span> NEW YORK <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span> DALLAS   <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span> CHICAGO  <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span> BOSTON   <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">60</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span> BEIJING  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>

<span class="token comment">// 面向视图删除</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">delete</span> <span class="token keyword">from</span> dept2_view<span class="token punctuation">;</span>

<span class="token comment">// 查询原表数据</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept2<span class="token punctuation">;</span>
Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

假设有一条非常复杂的<span class="token keyword">SQL</span>语句，而这条<span class="token keyword">SQL</span>语句需要在不同的位置上反复使用。
每一次使用这个<span class="token keyword">sql</span>语句的时候都需要重新编写，很长，很麻烦，怎么办？
  可以把这条复杂的<span class="token keyword">SQL</span>语句以视图对象的形式新建。
  在需要编写这条<span class="token keyword">SQL</span>语句的位置直接使用视图对象，可以大大简化开发。
  并且利于后期的维护，因为修改的时候也只需要修改一个位置就行，只需要
  修改视图对象所映射的<span class="token keyword">SQL</span>语句。

我们以后面向视图开发的时候，使用视图的时候可以像使用<span class="token keyword">table</span>一样。
可以对视图进行增删改查等操作。视图不是在内存当中，视图对象也是
存储在硬盘上的，不会消失。

再提醒一下：
  视图对应的语句只能是DQL语句。
  但是视图对象创建完成之后，可以对视图进行增删改查等操作。

小插曲：
  增删改查，又叫做：CRUD。
  CRUD是在公司中程序员之间沟通的术语。一般我们很少说增删改查。
  一般都说CRUD。

  C:<span class="token keyword">Create</span>（增）
  R:Retrive（查：检索）
  U:<span class="token keyword">Update</span>（改）
  D:<span class="token keyword">Delete</span>（删）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h1 id="dba常用命令"><a href="#dba常用命令" class="header-anchor">#</a> DBA常用命令</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>重点掌握：
  数据的导入和导出（数据的备份）
  其它命令了解一下即可。

数据导出？
  注意：在windows的dos命令窗口中：
    mysqldump bjpowernode<span class="token operator">&gt;</span>D:\bjpowernode<span class="token punctuation">.</span><span class="token keyword">sql</span> <span class="token operator">-</span>uroot <span class="token operator">-</span>p123456
  
  可以导出指定的表吗？
    mysqldump bjpowernode emp<span class="token operator">&gt;</span>D:\bjpowernode<span class="token punctuation">.</span><span class="token keyword">sql</span> <span class="token operator">-</span>uroot <span class="token operator">-</span>p123456

数据导入？
  注意：需要先登录到mysql数据库服务器上。
  然后创建数据库：<span class="token keyword">create</span> <span class="token keyword">database</span> bjpowernode<span class="token punctuation">;</span>
  使用数据库：<span class="token keyword">use</span> bjpowernode
  然后初始化数据库：source D:\bjpowernode<span class="token punctuation">.</span><span class="token keyword">sql</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h1 id="数据库设计三范式"><a href="#数据库设计三范式" class="header-anchor">#</a> 数据库设计三范式</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>什么是数据库设计范式？
数据库表的设计依据。教你怎么进行数据库表的设计。

数据库设计范式共有？
<span class="token number">3</span>个。
第一范式：要求任何一张表必须有主键，每一个字段原子性不可再分。

第二范式：建立在第一范式的基础之上，要求所有非主键字段完全依赖主键，
不要产生部分依赖。

第三范式：建立在第二范式的基础之上，要求所有非主键字段直接依赖主键，
不要产生传递依赖。

声明：三范式是面试官经常问的，所以一定要熟记在心！

设计数据库表的时候，按照以上的范式进行，可以避免表中数据的冗余，空间的浪费。

第一范式
最核心，最重要的范式，所有表的设计都需要满足。
必须有主键，并且每一个字段都是原子性不可再分。

学生编号 学生姓名 联系方式
<span class="token comment">------------------------------------------</span>
<span class="token number">1001</span>		张三		zs<span class="token variable">@gmail.com</span><span class="token punctuation">,</span><span class="token number">1359999999</span>
<span class="token number">1002</span>		李四		ls<span class="token variable">@gmail.com</span><span class="token punctuation">,</span><span class="token number">13699999999</span>
<span class="token number">1001</span>		王五		ww<span class="token variable">@163.net</span><span class="token punctuation">,</span><span class="token number">13488888888</span>

以上是学生表，满足第一范式吗？
  不满足，第一：没有主键。第二：联系方式可以分为邮箱地址和电话

学生编号<span class="token punctuation">(</span>pk<span class="token punctuation">)</span> 学生姓名	邮箱地址			联系电话
<span class="token comment">----------------------------------------------------</span>
<span class="token number">1001</span>				张三		zs<span class="token variable">@gmail.com</span>	<span class="token number">1359999999</span>
<span class="token number">1002</span>				李四		ls<span class="token variable">@gmail.com</span>	<span class="token number">13699999999</span>
<span class="token number">1003</span>				王五		ww<span class="token variable">@163.net</span>		<span class="token number">13488888888</span>

第二范式：
建立在第一范式的基础之上，
要求所有非主键字段必须完全依赖主键，不要产生部分依赖。

学生编号 学生姓名 教师编号 教师姓名
<span class="token comment">----------------------------------------------------</span>
<span class="token number">1001</span>			张三		<span class="token number">001</span>		王老师
<span class="token number">1002</span>			李四		<span class="token number">002</span>		赵老师
<span class="token number">1003</span>			王五		<span class="token number">001</span>		王老师
<span class="token number">1001</span>			张三		<span class="token number">002</span>		赵老师

这张表描述了学生和老师的关系：（<span class="token number">1</span>个学生可能有多个老师，<span class="token number">1</span>个老师有多个学生）
这是非常典型的：多对多关系！

分析以上的表是否满足第一范式？
  不满足第一范式。

怎么满足第一范式呢？修改

学生编号<span class="token operator">+</span>教师编号<span class="token punctuation">(</span>pk<span class="token punctuation">)</span>		学生姓名  教师姓名
<span class="token comment">----------------------------------------------------</span>
<span class="token number">1001</span>			<span class="token number">001</span>				张三			王老师
<span class="token number">1002</span>			<span class="token number">002</span>				李四			赵老师
<span class="token number">1003</span>			<span class="token number">001</span>				王五			王老师
<span class="token number">1001</span>			<span class="token number">002</span>				张三			赵老师

学生编号 教师编号，两个字段联合做主键，复合主键（PK: 学生编号<span class="token operator">+</span>教师编号）
经过修改之后，以上的表满足了第一范式。但是满足第二范式吗？
  不满足，“张三”依赖<span class="token number">1001</span>，“王老师”依赖<span class="token number">001</span>，显然产生了部分依赖。
  产生部分依赖有什么缺点？
    数据冗余了。空间浪费了。“张三”重复了，“王老师”重复了。

为了让以上的表满足第二范式，你需要这样设计：
  使用三张表来表示多对多的关系！！！！
  学生表
  学生编号<span class="token punctuation">(</span>pk<span class="token punctuation">)</span>		学生名字
  <span class="token comment">------------------------------------</span>
  <span class="token number">1001</span>					张三
  <span class="token number">1002</span>					李四
  <span class="token number">1003</span>					王五
  
  教师表
  教师编号<span class="token punctuation">(</span>pk<span class="token punctuation">)</span>		教师姓名
  <span class="token comment">--------------------------------------</span>
  <span class="token number">001</span>					王老师
  <span class="token number">002</span>					赵老师

  学生教师关系表
  id<span class="token punctuation">(</span>pk<span class="token punctuation">)</span>			学生编号<span class="token punctuation">(</span>fk<span class="token punctuation">)</span>			教师编号<span class="token punctuation">(</span>fk<span class="token punctuation">)</span>
  <span class="token comment">------------------------------------------------------</span>
  <span class="token number">1</span>						<span class="token number">1001</span>						<span class="token number">001</span>
  <span class="token number">2</span>						<span class="token number">1002</span>						<span class="token number">002</span>
  <span class="token number">3</span>						<span class="token number">1003</span>						<span class="token number">001</span>
  <span class="token number">4</span>						<span class="token number">1001</span>						<span class="token number">002</span>


背口诀：
  多对多怎么设计？
    多对多，三张表，关系表两个外键！！！！！！！！！！！！！！！


第三范式
第三范式建立在第二范式的基础之上
要求所有非主键字典必须直接依赖主键，不要产生传递依赖。

学生编号（PK） 学生姓名 班级编号  班级名称
<span class="token comment">---------------------------------------------------------</span>
  <span class="token number">1001</span>				张三		<span class="token number">01</span>			一年一班
  <span class="token number">1002</span>				李四		<span class="token number">02</span>			一年二班
  <span class="token number">1003</span>				王五		<span class="token number">03</span>			一年三班
  <span class="token number">1004</span>				赵六		<span class="token number">03</span>			一年三班

以上表的设计是描述：班级和学生的关系。很显然是<span class="token number">1</span>对多关系！
一个教室中有多个学生。

分析以上表是否满足第一范式？
  满足第一范式，有主键。

分析以上表是否满足第二范式？
  满足第二范式，因为主键不是复合主键，没有产生部分依赖。主键是单一主键。

分析以上表是否满足第三范式？
  第三范式要求：不要产生传递依赖！
  一年一班依赖<span class="token number">01</span>，<span class="token number">01</span>依赖<span class="token number">1001</span>，产生了传递依赖。
  不符合第三范式的要求。产生了数据的冗余。

那么应该怎么设计一对多呢？

  班级表：一
  班级编号<span class="token punctuation">(</span>pk<span class="token punctuation">)</span>				班级名称
  <span class="token comment">----------------------------------------</span>
  <span class="token number">01</span>								一年一班
  <span class="token number">02</span>								一年二班
  <span class="token number">03</span>								一年三班

  学生表：多

  学生编号（PK） 学生姓名 班级编号<span class="token punctuation">(</span>fk<span class="token punctuation">)</span>
  <span class="token comment">-------------------------------------------</span>
  <span class="token number">1001</span>				张三			<span class="token number">01</span>			
  <span class="token number">1002</span>				李四			<span class="token number">02</span>			
  <span class="token number">1003</span>				王五			<span class="token number">03</span>			
  <span class="token number">1004</span>				赵六			<span class="token number">03</span>		
  
  背口诀：
    一对多，两张表，多的表加外键！！！！！！！！！！！！

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br></div></div><h1 id="总结表的设计"><a href="#总结表的设计" class="header-anchor">#</a> 总结表的设计</h1> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>一对多：
  一对多，两张表，多的表加外键！！！！！！！！！！！！

多对多：
  多对多，三张表，关系表两个外键！！！！！！！！！！！！！！！

一对一：
一对一放到一张表中不就行了吗？为啥还要拆分表？
在实际的开发中，可能存在一张表字段太多，太庞大。这个时候要拆分表。
一对一怎么设计？
  没有拆分表之前：一张表
    t_user
    id		login_name		login_pwd		real_name		email				address<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">---------------------------------------------------------------------------</span>
    <span class="token number">1</span>			zhangsan		<span class="token number">123</span>				张三				zhangsan<span class="token variable">@xxx</span>
    <span class="token number">2</span>			lisi			<span class="token number">123</span>				李四				lisi<span class="token variable">@xxx</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  
  这种庞大的表建议拆分为两张：
    t_login 登录信息表
    id<span class="token punctuation">(</span>pk<span class="token punctuation">)</span>		login_name		login_pwd	
    <span class="token comment">---------------------------------</span>
    <span class="token number">1</span>				zhangsan		<span class="token number">123</span>			
    <span class="token number">2</span>				lisi			<span class="token number">123</span>			

    t_user 用户详细信息表
    id<span class="token punctuation">(</span>pk<span class="token punctuation">)</span>		real_name		email				address<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>	login_id<span class="token punctuation">(</span>fk<span class="token operator">+</span><span class="token keyword">unique</span><span class="token punctuation">)</span>
    <span class="token comment">-----------------------------------------------------------------------------------------</span>
    <span class="token number">100</span>			张三				zhangsan<span class="token variable">@xxx</span>								<span class="token number">1</span>
    <span class="token number">200</span>			李四				lisi<span class="token variable">@xxx</span>									<span class="token number">2</span>


    口诀：一对一，外键唯一！！！！！！！！！！
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h1 id="嘱咐"><a href="#嘱咐" class="header-anchor">#</a> 嘱咐</h1> <blockquote><p>数据库设计三范式是理论上的。</p> <p>实践和理论有的时候有偏差。</p> <p>最终的目的都是为了满足客户的需求，有的时候会拿冗余换执行速度。</p> <p>因为在sql当中，表和表之间连接次数越多，效率越低。（笛卡尔积）</p> <p>有的时候可能会存在冗余，但是为了减少表的连接次数，这样做也是合理的，
并且对于开发人员来说，sql语句的编写难度也会降低。</p></blockquote></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/xstudy/blogs/middleware/xuyan.html" class="prev">
            序言
          </a></span> <span class="next"><a href="/xstudy/blogs/middleware/redis/quick_start.html">
            Redis基础
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#关于sql语句的分类" class="sidebar-link reco-side-关于sql语句的分类" data-v-70334359>关于SQL语句的分类</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#简单查询" class="sidebar-link reco-side-简单查询" data-v-70334359>简单查询</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#条件查询" class="sidebar-link reco-side-条件查询" data-v-70334359>条件查询</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#分组查询" class="sidebar-link reco-side-分组查询" data-v-70334359>分组查询</a></li><li class="level-3" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#单行处理函数" class="sidebar-link reco-side-单行处理函数" data-v-70334359>单行处理函数</a></li><li class="level-3" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#分组函数-多行处理函数" class="sidebar-link reco-side-分组函数-多行处理函数" data-v-70334359>分组函数（多行处理函数）</a></li><li class="level-3" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#distinct" class="sidebar-link reco-side-distinct" data-v-70334359>distinct</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#内连接-等值连接" class="sidebar-link reco-side-内连接-等值连接" data-v-70334359>内连接：等值连接</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#内连接-非等值连接" class="sidebar-link reco-side-内连接-非等值连接" data-v-70334359>内连接：非等值连接</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#内连接-自连接" class="sidebar-link reco-side-内连接-自连接" data-v-70334359>内连接：自连接</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#外连接" class="sidebar-link reco-side-外连接" data-v-70334359>外连接</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#非空约束-not-null" class="sidebar-link reco-side-非空约束-not-null" data-v-70334359>非空约束：not null</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#唯一性约束-unique" class="sidebar-link reco-side-唯一性约束-unique" data-v-70334359>唯一性约束: unique</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#主键约束-primary-key" class="sidebar-link reco-side-主键约束-primary-key" data-v-70334359>主键约束: primary key</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#外键约束-foreign-key" class="sidebar-link reco-side-外键约束-foreign-key" data-v-70334359>外键约束：foreign key</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#myisam存储引擎" class="sidebar-link reco-side-myisam存储引擎" data-v-70334359>MyISAM存储引擎</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#innodb存储引擎" class="sidebar-link reco-side-innodb存储引擎" data-v-70334359>InnoDB存储引擎</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#memory存储引擎" class="sidebar-link reco-side-memory存储引擎" data-v-70334359>MEMORY存储引擎</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#提交事务、回滚事务" class="sidebar-link reco-side-提交事务、回滚事务" data-v-70334359>提交事务、回滚事务</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#事务四个特性" class="sidebar-link reco-side-事务四个特性" data-v-70334359>事务四个特性</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#事务的隔离性" class="sidebar-link reco-side-事务的隔离性" data-v-70334359>事务的隔离性</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#实现原理" class="sidebar-link reco-side-实现原理" data-v-70334359>实现原理</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#添加索引的条件" class="sidebar-link reco-side-添加索引的条件" data-v-70334359>添加索引的条件</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#索引的创建和删除" class="sidebar-link reco-side-索引的创建和删除" data-v-70334359>索引的创建和删除</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#是否使用索引进行检索" class="sidebar-link reco-side-是否使用索引进行检索" data-v-70334359>是否使用索引进行检索</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#索引失效的情况" class="sidebar-link reco-side-索引失效的情况" data-v-70334359>索引失效的情况</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#索引分类" class="sidebar-link reco-side-索引分类" data-v-70334359>索引分类</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#视图创建和删除" class="sidebar-link reco-side-视图创建和删除" data-v-70334359>视图创建和删除</a></li><li class="level-2" data-v-70334359><a href="/xstudy/blogs/middleware/mysql/MySQL.html#视图的用途" class="sidebar-link reco-side-视图的用途" data-v-70334359>视图的用途</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:10px;bottom:170px;z-index:999999;display:none;" data-v-5775ee02>
      我是X欢迎你的关注 
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="192" height="281" class="live2d" style="right:65px;bottom:-20px;opacity:0.85;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><canvas id="vuepress-canvas-ribbon"></canvas><div></div><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:-1;" data-v-248d85d6></canvas></div></div></div>
    <script src="/xstudy/assets/js/app.3d6c3b03.js" defer></script><script src="/xstudy/assets/js/19.64802264.js" defer></script><script src="/xstudy/assets/js/1.09d9e8ff.js" defer></script><script src="/xstudy/assets/js/160.dce4d5d9.js" defer></script>
  </body>
</html>
